{#
    개인 프로필 폼 - 기본정보 섹션
    profile: PersonalProfile 객체
    user: User 객체
    action: 'create' 또는 'update'

    법인 직원 _personal_info.html 구조와 통일
#}
<section class="form-section" id="personal-info" aria-labelledby="personal-info-title">
    <div class="card">
        <div class="card-header">
            <h2 id="personal-info-title" class="card-title">
                <i class="fas fa-user" aria-hidden="true"></i>
                개인 기본정보
            </h2>
        </div>
        <div class="card-body">
            {# 프로필 사진 영역 #}
            <div class="photo-upload-section">
                <div class="photo-preview" id="photoPreview">
                    {% if profile and profile.photo %}
                    <img src="{{ profile.photo }}" alt="프로필 사진" id="previewImage">
                    {% else %}
                    <div class="photo-placeholder" id="photoPlaceholder">
                        <i class="fas fa-user"></i>
                        <span>사진 미등록</span>
                    </div>
                    {% endif %}
                </div>
                <div class="photo-upload-controls">
                    {% if profile %}
                    {# 프로필 존재: 파일 업로드 #}
                    <label class="form-label">프로필 사진</label>
                    <div class="photo-file-upload" id="photoFileUpload">
                        <input type="file" id="photoFile" name="photoFile"
                               accept="image/jpeg,image/png,image/gif,image/webp"
                               class="form-input-file" style="display: none;">
                        <input type="hidden" id="photo" name="photo" value="{{ profile.photo or '' }}">
                        <div class="photo-upload-buttons">
                            <button type="button" class="btn btn-secondary btn-sm" id="selectPhotoBtn">
                                <i class="fas fa-camera"></i> 사진 선택
                            </button>
                            {% if profile.photo and not profile.photo.startswith('http') %}
                            <button type="button" class="btn btn-outline-danger btn-sm" id="deletePhotoBtn">
                                <i class="fas fa-trash"></i> 삭제
                            </button>
                            {% endif %}
                        </div>
                        <small class="form-help">JPG, PNG, GIF, WebP (최대 5MB)</small>
                    </div>
                    {% else %}
                    {# 신규 등록 모드: 비활성화 안내 #}
                    <label class="form-label">프로필 사진</label>
                    <div class="photo-upload-disabled">
                        <div class="disabled-message">
                            <i class="fas fa-info-circle"></i>
                            <span>프로필 생성 후 사진을 업로드할 수 있습니다.</span>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="name" class="form-label">
                        성명 (한글) <span class="required" aria-hidden="true">*</span>
                    </label>
                    <input type="text" id="name" name="name" class="form-input"
                           value="{{ profile.name if profile else '' }}"
                           placeholder="홍길동" required aria-required="true">
                </div>

                <div class="form-group">
                    <label for="english_name" class="form-label">여권명 (영문)</label>
                    <input type="text" id="english_name" name="english_name" class="form-input"
                           value="{{ profile.english_name if profile and profile.english_name else '' }}"
                           placeholder="Hong Gildong">
                </div>

                <div class="form-group">
                    <label for="chinese_name" class="form-label">한자 이름</label>
                    <input type="text" id="chinese_name" name="chinese_name" class="form-input"
                           value="{{ profile.chinese_name if profile and profile.chinese_name else '' }}"
                           placeholder="洪吉童">
                </div>

                <div class="form-group">
                    <label for="resident_number" class="form-label">주민등록번호</label>
                    <input type="text" id="resident_number" name="resident_number" class="form-input"
                           value="{{ profile.resident_number if profile and profile.resident_number else '' }}"
                           placeholder="850520-1******" maxlength="14"
                           aria-describedby="rrn_help">
                    <small id="rrn_help" class="form-help">마스킹 처리된 형식으로 입력 (예: 850520-1******)</small>
                </div>

                <div class="form-group">
                    <label for="birth_date" class="form-label">생년월일</label>
                    <input type="date" id="birth_date" name="birth_date" class="form-input"
                           value="{{ profile.birth_date if profile and profile.birth_date else '' }}">
                </div>

                <div class="form-group">
                    <label for="lunar_birth" class="form-label">음력 여부</label>
                    <select id="lunar_birth" name="lunar_birth" class="form-input">
                        <option value="false" {% if not profile or not profile.lunar_birth %}selected{% endif %}>양력</option>
                        <option value="true" {% if profile and profile.lunar_birth %}selected{% endif %}>음력</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="gender" class="form-label">성별</label>
                    <select id="gender" name="gender" class="form-input">
                        <option value="">선택하세요</option>
                        <option value="남성" {% if profile and profile.gender == '남성' %}selected{% endif %}>남성</option>
                        <option value="여성" {% if profile and profile.gender == '여성' %}selected{% endif %}>여성</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</section>
