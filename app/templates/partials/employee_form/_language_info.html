{#
    직원 폼 - 언어능력 섹션 (동적 폼)
    employee: 직원 객체 (수정 모드일 때)
    language_list: 언어 능력 목록
#}
{% from 'macros/_cards.html' import form_section_card_dynamic %}
{% from 'macros/_form_controls.html' import remove_button %}

{% call form_section_card_dynamic('언어능력', 'fas fa-language', 'language-info', 'addLanguage', '추가') %}
<div class="dynamic-list" id="languageList">
    {% if language_list and language_list|length > 0 %}
        {% for lang in language_list %}
        <div class="dynamic-item" data-index="{{ loop.index0 }}">
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">언어</label>
                    <select name="language_name[]" class="form-input">
                        <option value="">선택하세요</option>
                        {% for l in ['영어', '일본어', '중국어', '스페인어', '프랑스어', '독일어', '러시아어', '베트남어', '태국어', '기타'] %}
                        <option value="{{ l }}" {% if lang.language == l %}selected{% endif %}>{{ l }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">수준</label>
                    <select name="language_level[]" class="form-input">
                        <option value="">선택하세요</option>
                        <option value="원어민" {% if lang.level == '원어민' or lang.proficiency == '원어민' %}selected{% endif %}>원어민</option>
                        <option value="고급" {% if lang.level == '고급' or lang.proficiency == '고급' %}selected{% endif %}>상</option>
                        <option value="중급" {% if lang.level == '중급' or lang.proficiency == '중급' %}selected{% endif %}>중</option>
                        <option value="초급" {% if lang.level == '초급' or lang.proficiency == '초급' %}selected{% endif %}>하</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">시험명</label>
                    <input type="text" name="language_test_name[]" class="form-input"
                           value="{{ lang.test_name }}"
                           placeholder="TOEIC, JLPT 등">
                </div>
                <div class="form-group">
                    <label class="form-label">점수/급수</label>
                    <input type="text" name="language_score[]" class="form-input"
                           value="{{ lang.score }}"
                           placeholder="900점, N1 등">
                </div>
                <div class="form-group">
                    <label class="form-label">취득일</label>
                    <input type="date" name="language_test_date[]" class="form-input"
                           value="{{ lang.test_date }}">
                </div>
            </div>
            {{ remove_button() }}
        </div>
        {% endfor %}
    {% else %}
    <div class="dynamic-item" data-index="0">
        <div class="form-grid">
            <div class="form-group">
                <label class="form-label">언어</label>
                <select name="language_name[]" class="form-input">
                    <option value="">선택하세요</option>
                    {% for l in ['영어', '일본어', '중국어', '스페인어', '프랑스어', '독일어', '러시아어', '베트남어', '태국어', '기타'] %}
                    <option value="{{ l }}">{{ l }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">수준</label>
                <select name="language_level[]" class="form-input">
                    <option value="">선택하세요</option>
                    <option value="원어민">원어민</option>
                    <option value="고급">상</option>
                    <option value="중급">중</option>
                    <option value="초급">하</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">시험명</label>
                <input type="text" name="language_test_name[]" class="form-input"
                       placeholder="TOEIC, JLPT 등">
            </div>
            <div class="form-group">
                <label class="form-label">점수/급수</label>
                <input type="text" name="language_score[]" class="form-input"
                       placeholder="900점, N1 등">
            </div>
            <div class="form-group">
                <label class="form-label">취득일</label>
                <input type="date" name="language_test_date[]" class="form-input">
            </div>
        </div>
        {{ remove_button() }}
    </div>
    {% endif %}
</div>
{% endcall %}
