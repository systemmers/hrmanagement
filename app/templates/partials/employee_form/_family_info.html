{#
    직원 폼 - 가족사항 섹션 (동적 폼)
    employee: 직원 객체 (수정 모드일 때)
#}
<section class="form-section" id="family-info">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-users"></i>
                가족사항
            </h2>
            <button type="button" class="btn btn-sm btn-secondary" id="addFamily">
                <i class="fas fa-plus"></i> 추가
            </button>
        </div>
        <div class="card-body">
            <div class="dynamic-list" id="familyList">
                {% if employee and employee.family_members %}
                    {% for member in employee.family_members %}
                    <div class="dynamic-item" data-index="{{ loop.index0 }}">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">관계</label>
                                <select name="family_relation[]" class="form-input">
                                    <option value="">선택하세요</option>
                                    <option value="배우자" {% if member.relation == '배우자' %}selected{% endif %}>배우자</option>
                                    <option value="자녀" {% if member.relation == '자녀' %}selected{% endif %}>자녀</option>
                                    <option value="부" {% if member.relation == '부' %}selected{% endif %}>부</option>
                                    <option value="모" {% if member.relation == '모' %}selected{% endif %}>모</option>
                                    <option value="형제" {% if member.relation == '형제' %}selected{% endif %}>형제</option>
                                    <option value="자매" {% if member.relation == '자매' %}selected{% endif %}>자매</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">성명</label>
                                <input type="text" name="family_name[]" class="form-input"
                                       value="{{ member.name }}" placeholder="이름">
                            </div>
                            <div class="form-group">
                                <label class="form-label">생년월일</label>
                                <input type="date" name="family_birth_date[]" class="form-input"
                                       value="{{ member.birth_date }}">
                            </div>
                            <div class="form-group">
                                <label class="form-label">직업</label>
                                <input type="text" name="family_occupation[]" class="form-input"
                                       value="{{ member.occupation }}" placeholder="직업">
                            </div>
                            <div class="form-group">
                                <label class="form-label">연락처</label>
                                <input type="tel" name="family_phone[]" class="form-input"
                                       value="{{ member.phone }}" placeholder="010-0000-0000">
                            </div>
                            <div class="form-group">
                                <label class="form-label">동거여부</label>
                                <select name="family_living_together[]" class="form-input">
                                    <option value="">선택하세요</option>
                                    <option value="동거" {% if member.is_cohabitant == True or member.living_together == True %}selected{% endif %}>동거</option>
                                    <option value="별거" {% if member.is_cohabitant == False or member.living_together == False %}selected{% endif %}>별거</option>
                                </select>
                            </div>
                        </div>
                        <button type="button" class="btn-remove" title="삭제">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    {% endfor %}
                {% else %}
                <div class="dynamic-item" data-index="0">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">관계</label>
                            <select name="family_relation[]" class="form-input">
                                <option value="">선택하세요</option>
                                <option value="배우자">배우자</option>
                                <option value="자녀">자녀</option>
                                <option value="부">부</option>
                                <option value="모">모</option>
                                <option value="형제">형제</option>
                                <option value="자매">자매</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">성명</label>
                            <input type="text" name="family_name[]" class="form-input" placeholder="이름">
                        </div>
                        <div class="form-group">
                            <label class="form-label">생년월일</label>
                            <input type="date" name="family_birth_date[]" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">직업</label>
                            <input type="text" name="family_occupation[]" class="form-input" placeholder="직업">
                        </div>
                        <div class="form-group">
                            <label class="form-label">연락처</label>
                            <input type="tel" name="family_phone[]" class="form-input" placeholder="010-0000-0000">
                        </div>
                        <div class="form-group">
                            <label class="form-label">동거여부</label>
                            <select name="family_living_together[]" class="form-input">
                                <option value="">선택하세요</option>
                                <option value="동거">동거</option>
                                <option value="별거">별거</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn-remove" title="삭제">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
