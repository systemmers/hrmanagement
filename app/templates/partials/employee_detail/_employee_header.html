{#
    직원 상세 - 직원 헤더 카드
    employee: 직원 객체
    get_status_text: 상태 텍스트 함수
    calculate_tenure: 재직기간 계산 함수
    business_card_front: 명함 앞면 첨부파일 객체
    business_card_back: 명함 뒷면 첨부파일 객체
    can_edit_business_card: 명함 편집 권한 여부
#}
<div class="employee-header">
    <div class="employee-header-content">
        <div class="employee-header-left">
            <div class="employee-photo">
                <img src="{{ employee.photo }}" alt="{{ employee.name }}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\'fas fa-user\'></i>';">
            </div>
            <div class="employee-info">
                <div class="employee-name">{{ employee.name }}</div>
                <div class="employee-name-en">{{ employee.name|upper }}</div>
                <div class="employee-meta">
                    <div class="meta-item">
                        <i class="fas fa-building"></i>
                        <span>{{ employee.department }}</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-id-badge"></i>
                        <span>{{ employee.position }}</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-calendar-check"></i>
                        <span>{{ get_status_text(employee.status) }}</span>
                    </div>
                </div>
                <div class="employee-stats">
                    <div class="stat-item">
                        <div class="stat-label">입사일</div>
                        <div class="stat-value">{{ employee.hireDate }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">재직기간</div>
                        <div class="stat-value">{{ calculate_tenure(employee.hireDate) }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">연차 잔여</div>
                        <div class="stat-value">15일</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">사번</div>
                        <div class="stat-value">EMP-{{ '%03d'|format(employee.id) }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 명함 카드 영역 -->
        <div class="business-card-container" data-employee-id="{{ employee.id }}">
            <span class="business-card-title">명함</span>
            <div class="business-card-wrapper">
                <div class="business-card">
                    {% if business_card_front %}
                    <!-- 앞면 -->
                    <div class="card-face card-front">
                        <img src="{{ url_for('static', filename='uploads/business_cards/' ~ business_card_front.file_path.split('/')[-1]) }}" alt="명함 앞면">
                    </div>
                    {% else %}
                    <!-- 앞면 플레이스홀더 -->
                    <div class="card-face card-front">
                        <div class="business-card-placeholder">
                            <i class="fas fa-id-card"></i>
                            <span>앞면</span>
                        </div>
                    </div>
                    {% endif %}

                    {% if business_card_back %}
                    <!-- 뒷면 -->
                    <div class="card-face card-back">
                        <img src="{{ url_for('static', filename='uploads/business_cards/' ~ business_card_back.file_path.split('/')[-1]) }}" alt="명함 뒷면">
                    </div>
                    {% else %}
                    <!-- 뒷면 플레이스홀더 -->
                    <div class="card-face card-back">
                        <div class="business-card-placeholder">
                            <i class="fas fa-id-card"></i>
                            <span>뒷면</span>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% if business_card_front or business_card_back %}
            <span class="flip-hint"><i class="fas fa-sync-alt"></i> 마우스 오버시 뒤집기</span>
            {% endif %}

            {% if can_edit_business_card %}
            <div class="business-card-actions">
                <button type="button" class="btn-upload-card" onclick="openBusinessCardModal()">
                    <i class="fas fa-upload"></i> 업로드
                </button>
                {% if business_card_front or business_card_back %}
                <button type="button" class="btn-delete-card" onclick="deleteAllBusinessCards()">
                    <i class="fas fa-trash"></i> 삭제
                </button>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
</div>
