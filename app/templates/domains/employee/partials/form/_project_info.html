{#
    직원 폼 - 프로젝트 섹션 (동적 폼)
    현재 소속 회사에서의 프로젝트 이력
    employee: 직원 객체 (수정 모드일 때)
    hr_project_list: 프로젝트 목록

    Migration (2026-01-13): .card → .info-section
#}
{% from 'shared/macros/_info_display.html' import info_section_start, info_section_end, info_section_body_start, info_section_body_end, svg_icon_clipboard %}
<section class="form__section" id="hr-project-info">
    {{ info_section_start() }}
        <div class="info-section__header">
            <div class="info-section__title">
                <div class="info-section__icon">
                    {{ svg_icon_clipboard() }}
                </div>
                프로젝트
            </div>
            <div class="info-section__actions">
                <button type="button" class="info-section__add-btn" id="addHrProject">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                    추가
                </button>
            </div>
        </div>
        {{ info_section_body_start() }}
            <div class="dynamic-list" id="hrProjectList">
                {% if hr_project_list and hr_project_list|length > 0 %}
                    {% for project in hr_project_list %}
                    <div class="dynamic-item" data-index="{{ loop.index0 }}">
                        <div class="form-grid">
                            <div class="form__group">
                                <label class="form__label">프로젝트명</label>
                                <input type="text" name="hr_project_name[]" class="form__input"
                                       value="{{ project.project_name }}"
                                       placeholder="프로젝트명">
                            </div>
                            <div class="form__group">
                                <label class="form__label">역할/직책</label>
                                <input type="text" name="hr_project_role[]" class="form__input"
                                       value="{{ project.role }}"
                                       placeholder="PM, 개발자, 디자이너 등">
                            </div>
                            <div class="form__group">
                                <label class="form__label">시작일</label>
                                <input type="date" name="hr_project_start_date[]" class="form__input"
                                       value="{{ project.start_date }}">
                            </div>
                            <div class="form__group">
                                <label class="form__label">종료일</label>
                                <input type="date" name="hr_project_end_date[]" class="form__input"
                                       value="{{ project.end_date }}">
                            </div>
                            <div class="form__group">
                                <label class="form__label">담당업무</label>
                                <input type="text" name="hr_project_duty[]" class="form__input"
                                       value="{{ project.duty }}"
                                       placeholder="담당업무">
                            </div>
                            <div class="form__group">
                                <label class="form__label">발주처</label>
                                <input type="text" name="hr_project_client[]" class="form__input"
                                       value="{{ project.client }}"
                                       placeholder="발주처/클라이언트">
                            </div>
                        </div>
                        <button type="button" class="btn-remove" title="삭제">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    {% endfor %}
                {% else %}
                <div class="dynamic-item" data-index="0">
                    <div class="form-grid">
                        <div class="form__group">
                            <label class="form__label">프로젝트명</label>
                            <input type="text" name="hr_project_name[]" class="form__input" placeholder="프로젝트명">
                        </div>
                        <div class="form__group">
                            <label class="form__label">역할/직책</label>
                            <input type="text" name="hr_project_role[]" class="form__input" placeholder="PM, 개발자, 디자이너 등">
                        </div>
                        <div class="form__group">
                            <label class="form__label">시작일</label>
                            <input type="date" name="hr_project_start_date[]" class="form__input">
                        </div>
                        <div class="form__group">
                            <label class="form__label">종료일</label>
                            <input type="date" name="hr_project_end_date[]" class="form__input">
                        </div>
                        <div class="form__group">
                            <label class="form__label">담당업무</label>
                            <input type="text" name="hr_project_duty[]" class="form__input" placeholder="담당업무">
                        </div>
                        <div class="form__group">
                            <label class="form__label">발주처</label>
                            <input type="text" name="hr_project_client[]" class="form__input" placeholder="발주처/클라이언트">
                        </div>
                    </div>
                    <button type="button" class="btn-remove" title="삭제">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                {% endif %}
            </div>
            <p class="form__hint">현재 소속 회사에서 진행한 프로젝트 이력을 입력해 주세요.</p>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>
