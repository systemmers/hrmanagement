{#
    직원 상세 - 계정정보 섹션 (디테일 뷰 전용)
    HR Card 스타일가이드 적용

    Migration (2026-01-13): .info-grid → .info-table (HR Card 스타일가이드)
#}
{% from 'shared/macros/_info_display.html' import section_title, info_section_start, info_section_end, info_section_header, info_section_header_with_action, info_section_body_start, info_section_body_end, info_table_start, info_table_end, info_table_row, info_table_row_start, info_table_row_end, info_table_cell, info_table_cell_custom, svg_icon_user_circle %}

{{ section_title('계정정보') }}
<section id="account-info" class="content-section">
    {{ info_section_start() }}
        {{ info_section_header_with_action('계정정보', svg_icon_user_circle(), 'btn-edit-account', '수정') }}
        {{ info_section_body_start() }}
            {% if user %}
            {{ info_table_start() }}
                {# 상태 - 커스텀 값 (배지) #}
                {{ info_table_row_start() }}
                    {% call info_table_cell_custom('상태') %}
                        <span class="badge badge--{{ 'success' if user.is_active else 'secondary' }}">
                            {{ '활성' if user.is_active else '비활성' }}
                        </span>
                    {% endcall %}
                    {{ info_table_cell('아이디', user.username) }}
                {{ info_table_row_end() }}

                {{ info_table_row('계정 이메일', user.email, '역할', user.role_display) }}
                {{ info_table_row('계정 유형', user.account_type_display, '생성일', user.created_at.strftime('%Y-%m-%d') if user.created_at else none) }}
                {{ info_table_row('마지막 로그인', user.last_login.strftime('%Y-%m-%d %H:%M') if user.last_login else none, none, none) }}
            {{ info_table_end() }}
            <p class="text-muted mt-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                계정 정보 변경은 계정 관리 메뉴에서 가능합니다.
            </p>
            {% else %}
            <div class="alert alert--warning">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                <span>연결된 계정이 없습니다.</span>
            </div>
            {% endif %}
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>
