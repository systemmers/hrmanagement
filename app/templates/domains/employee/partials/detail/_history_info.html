{#
    직원 상세 - 이력 및 경력 섹션들
    섹션 7-13: 학력, 경력, 자격증, 언어능력, 병역, 수상, 프로젝트 참여

    Migration (2026-01-13):
    - .card → .info-section
    - table → .data-table BEM 클래스
    - .info-grid → .info-table
#}
{% from 'shared/macros/_info_display.html' import section_title, info_section_start, info_section_end, info_section_header, info_section_header_with_action, info_section_body_start, info_section_body_end, info_table_start, info_table_end, info_table_row, info_table_row_start, info_table_row_end, info_table_cell, info_table_cell_custom, svg_icon_academic, svg_icon_briefcase, svg_icon_badge, svg_icon_globe, svg_icon_shield, svg_icon_star, svg_icon_clipboard, data_table_th_drag, data_table_td_drag, data_table_th_actions, data_table_actions_full %}

{# 섹션 7: 학력정보 #}
<section id="education-info" class="content-section">
    {{ section_title('학력정보') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('학력정보', svg_icon_academic(), 'btn-add-education', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="education-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">학력구분</th>
                            <th class="data-table__header">학교명</th>
                            <th class="data-table__header">졸업년월</th>
                            <th class="data-table__header">전공</th>
                            <th class="data-table__header">학점</th>
                            <th class="data-table__header">졸업유무</th>
                            <th class="data-table__header">비고</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if education_list %}
                        {% for edu in education_list %}
                        <tr class="data-table__row" data-id="{{ edu.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">{{ get_degree_label(edu.degree) }}</td>
                            <td class="data-table__cell">{{ edu.school }}</td>
                            <td class="data-table__cell">{{ edu.graduation_year }}</td>
                            <td class="data-table__cell">{{ edu.major or '-' }}</td>
                            <td class="data-table__cell">{{ edu.gpa or '-' }}</td>
                            <td class="data-table__cell"><span class="badge badge--success">졸업</span></td>
                            <td class="data-table__cell">{{ edu.note or '-' }}</td>
                            {{ data_table_actions_full(item_id=edu.id, show_attach=true) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="10" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-graduation-cap"></i>
                                    <p>등록된 학력정보가 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 8: 경력정보 #}
<section id="career-info" class="content-section">
    {{ section_title('경력정보') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('경력정보 (입사 전)', svg_icon_briefcase(), 'btn-add-career', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="career-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">직장명</th>
                            <th class="data-table__header">부서</th>
                            <th class="data-table__header">직위</th>
                            <th class="data-table__header">직급</th>
                            <th class="data-table__header">직책</th>
                            <th class="data-table__header">직무</th>
                            <th class="data-table__header">재직기간</th>
                            <th class="data-table__header">급여유형</th>
                            <th class="data-table__header">연봉/월급</th>
                            <th class="data-table__header">담당업무</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if career_list %}
                        {% for career in career_list %}
                        <tr class="data-table__row" data-id="{{ career.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">{{ career.company }}</td>
                            <td class="data-table__cell">{{ career.department or '-' }}</td>
                            <td class="data-table__cell">{{ career.position or '-' }}</td>
                            <td class="data-table__cell">{{ career.job_grade or '-' }}</td>
                            <td class="data-table__cell">{{ career.job_title or '-' }}</td>
                            <td class="data-table__cell">{{ career.job_role or '-' }}</td>
                            <td class="data-table__cell">{{ career.start_date }} ~ {{ career.end_date or '재직중' }}</td>
                            <td class="data-table__cell">{% if career.salary_type %}
                                {% if career.salary_type == 'annual' %}연봉제
                                {% elif career.salary_type == 'monthly' %}월급제
                                {% elif career.salary_type == 'hourly' %}시급제
                                {% elif career.salary_type == 'pay_step' %}호봉제
                                {% else %}{{ career.salary_type }}{% endif %}
                            {% else %}-{% endif %}</td>
                            <td class="data-table__cell">{% if career.salary %}{{ '{:,}'.format(career.salary) }}원{% elif career.monthly_salary %}{{ '{:,}'.format(career.monthly_salary) }}원/월{% else %}-{% endif %}{% if career.pay_step %} ({{ career.pay_step }}호봉){% endif %}</td>
                            <td class="data-table__cell">{{ career.duty or '-' }}</td>
                            {{ data_table_actions_full(item_id=career.id, show_attach=true) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="13" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-briefcase"></i>
                                    <p>등록된 경력정보가 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
            <div class="table__summary">
                <strong>총 경력:</strong> {% if career_list %}{{ career_list|length }}개사{% else %}정보 없음{% endif %}
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 9: 자격증 및 면허 #}
<section id="certificate-info" class="content-section">
    {{ section_title('자격증 및 면허') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('자격증 및 면허', svg_icon_badge(), 'btn-add-certificate', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="certificate-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">구분</th>
                            <th class="data-table__header">종류</th>
                            <th class="data-table__header">등급/점수</th>
                            <th class="data-table__header">발행처</th>
                            <th class="data-table__header">취득일</th>
                            <th class="data-table__header">비고</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if certificate_list %}
                        {% for cert in certificate_list %}
                        <tr class="data-table__row" data-id="{{ cert.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">자격증</td>
                            <td class="data-table__cell">{{ cert.name }}</td>
                            <td class="data-table__cell">{{ cert.grade or '-' }}</td>
                            <td class="data-table__cell">{{ cert.issuer or '-' }}</td>
                            <td class="data-table__cell">{{ cert.acquired_date or '-' }}</td>
                            <td class="data-table__cell">{% if cert.expiry_date %}만료: {{ cert.expiry_date }}{% else %}-{% endif %}</td>
                            {{ data_table_actions_full(item_id=cert.id, show_attach=true) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="9" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-certificate"></i>
                                    <p>등록된 자격증 정보가 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 10: 언어능력 #}
<section id="language-info" class="content-section">
    {{ section_title('언어능력') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('언어능력', svg_icon_globe(), 'btn-add-language', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="language-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">언어</th>
                            <th class="data-table__header">수준</th>
                            <th class="data-table__header">시험명</th>
                            <th class="data-table__header">점수</th>
                            <th class="data-table__header">취득일</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if language_list %}
                        {% for lang in language_list %}
                        <tr class="data-table__row" data-id="{{ lang.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">{{ lang.language or '-' }}</td>
                            <td class="data-table__cell">{{ get_level_label(lang.level) if lang.level else '-' }}</td>
                            <td class="data-table__cell">{{ lang.test_name or '-' }}</td>
                            <td class="data-table__cell">{{ lang.score or '-' }}</td>
                            <td class="data-table__cell">{{ lang.acquired_date or '-' }}</td>
                            {{ data_table_actions_full(item_id=lang.id, show_attach=true) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="8" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-language"></i>
                                    <p>등록된 언어능력 정보가 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 11: 병역정보 (단독 섹션) - info-table 구조 적용 #}
<section id="military-info" class="content-section">
    {{ section_title('병역정보') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('병역정보', svg_icon_shield(), 'btn-edit-military', '수정') }}
        {{ info_section_body_start() }}
            {{ info_table_start() }}
                {% if military %}
                {{ info_table_row('병역구분', get_military_status_label(military.status), '군별', get_branch_label(military.branch)) }}

                {# 복무기간 - 커스텀 값 #}
                {{ info_table_row_start() }}
                    {% call info_table_cell_custom('복무기간') %}
                        {% if military.start_date %}{{ military.start_date }} ~ {{ military.end_date or '복무중' }}{% else %}<span class="info-table__value--empty">미등록</span>{% endif %}
                    {% endcall %}
                    {{ info_table_cell('계급', military.rank) }}
                {{ info_table_row_end() }}

                {{ info_table_row('보직', military.duty, '병과', military.specialty) }}
                {% if military.exemption_reason %}
                {{ info_table_row('면제사유', military.exemption_reason, none, none) }}
                {% endif %}
                {% else %}
                {{ info_table_row('병역구분', none, '군별', none) }}
                {{ info_table_row('복무기간', none, '계급', none) }}
                {{ info_table_row('보직', none, '병과', none) }}
                {% endif %}
            {{ info_table_end() }}
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 12: 수상내역 (프로필 공통) #}
<section id="award-info" class="content-section">
    {{ section_title('수상내역') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('수상내역', svg_icon_star(), 'btn-add-award', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="award-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">수상일</th>
                            <th class="data-table__header">수상명</th>
                            <th class="data-table__header">수여기관</th>
                            <th class="data-table__header">수상내용</th>
                            <th class="data-table__header">비고</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if award_list %}
                        {% for award in award_list|sort(attribute='award_date', reverse=True) %}
                        <tr class="data-table__row" data-id="{{ award.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">{{ award.award_date or '-' }}</td>
                            <td class="data-table__cell">{{ award.award_name }}</td>
                            <td class="data-table__cell">{{ award.institution or '-' }}</td>
                            <td class="data-table__cell">{{ award.description or '-' }}</td>
                            <td class="data-table__cell">{{ award.notes or '-' }}</td>
                            {{ data_table_actions_full(item_id=award.id, show_attach=true) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="8" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-trophy"></i>
                                    <p>등록된 수상내역이 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>

{# 섹션 13: 프로젝트 참여이력 (모든 계정) #}
<section id="project-participation-info" class="content-section">
    {{ section_title('프로젝트 참여이력') }}
    {{ info_section_start() }}
        {{ info_section_header_with_action('프로젝트 참여이력', svg_icon_clipboard(), 'btn-add-project', '추가') }}
        {{ info_section_body_start('info-section__body--no-padding') }}
            <div class="table-container">
                <table class="data-table" data-draggable="true" id="project-participation-table">
                    <thead class="data-table__head">
                        <tr class="data-table__row">
                            {{ data_table_th_drag() }}
                            <th class="data-table__header">사업명</th>
                            <th class="data-table__header">참여기간</th>
                            <th class="data-table__header">기간</th>
                            <th class="data-table__header">담당업무</th>
                            <th class="data-table__header">역할/직책</th>
                            <th class="data-table__header">발주처</th>
                            {{ data_table_th_actions() }}
                        </tr>
                    </thead>
                    <tbody class="data-table__body">
                        {% if project_participation_list %}
                        {% for participation in project_participation_list %}
                        <tr class="data-table__row" data-id="{{ participation.id }}">
                            {{ data_table_td_drag() }}
                            <td class="data-table__cell">{{ participation.project_name }}</td>
                            <td class="data-table__cell">{{ participation.start_date }} ~ {{ participation.end_date }}</td>
                            <td class="data-table__cell">{{ participation.duration }}</td>
                            <td class="data-table__cell">{{ participation.duty }}</td>
                            <td class="data-table__cell">{{ participation.role }}</td>
                            <td class="data-table__cell">{{ participation.client }}</td>
                            {{ data_table_actions_full(item_id=participation.id, show_attach=false) }}
                        </tr>
                        {% endfor %}
                        {% else %}
                        <tr class="data-table__row">
                            <td colspan="9" class="data-table__cell data-table__cell--empty">
                                <div class="empty-state">
                                    <i class="fas fa-briefcase"></i>
                                    <p>등록된 프로젝트 참여이력이 없습니다</p>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        {{ info_section_body_end() }}
    {{ info_section_end() }}
</section>
