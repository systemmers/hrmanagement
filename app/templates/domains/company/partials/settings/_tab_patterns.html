{# 패턴 규칙 탭 #}
{% from "macros/_settings.html" import settings_toggle, settings_preview %}

<div id="tab-patterns" class="tab-panel" role="tabpanel">
    <div id="patterns-content">
        {# 사번 규칙 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-id-badge"></i>
                사번 규칙
            </h2>
            <div class="form-row form-row--settings">
                <div class="form-group">
                    <label class="form-label">회사 코드</label>
                    <input type="text" class="form-input text-uppercase" id="company_code"
                           maxlength="6" placeholder="ABC">
                </div>
                <div class="form-group">
                    <label class="form-label">사번 접두어</label>
                    <input type="text" class="form-input" id="employee_number_prefix"
                           maxlength="10" placeholder="EMP">
                </div>
                <div class="form-group">
                    <label class="form-label">구분자</label>
                    <select class="form-input" id="employee_number_separator">
                        {% for opt in EMPLOYEE_NUMBER_SEPARATOR_OPTIONS %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">순번 자릿수</label>
                    <select class="form-input" id="employee_number_digits">
                        {% for opt in NUMBER_DIGITS_OPTIONS %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endfor %}
                    </select>
                </div>
                {{ settings_toggle('employee_number_include_year', '연도 포함', '사번에 연도 포함 (예: 2025-EMP-0001)') }}
                {{ settings_preview('employee_number_preview', '미리보기', 'ABC-EMP-000001') }}
            </div>
        </div>

        {# 이메일 설정 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-envelope"></i>
                이메일 설정
            </h2>
            <div class="form-row form-row--settings">
                <div class="form-group">
                    <label class="form-label">회사 이메일 도메인</label>
                    <input type="text" class="form-input" id="email_domain"
                           placeholder="company.co.kr">
                </div>
                {{ settings_toggle('auto_generate_email', '이메일 자동 생성', '직원 등록 시 이메일 자동 생성') }}
                <div class="form-group">
                    <label class="form-label">이메일 포맷</label>
                    <select class="form-input" id="email_format">
                        {% for opt in EMAIL_FORMAT_OPTIONS %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endfor %}
                    </select>
                </div>
                {{ settings_preview('email_preview', '미리보기', 'hong.gildong@company.co.kr') }}
            </div>
        </div>

        {# 내선번호 설정 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-phone-alt"></i>
                내선번호 설정
            </h2>
            <div class="form-row form-row--settings">
                <div class="form-group">
                    <label class="form-label">내선번호 자릿수</label>
                    <select class="form-input" id="internal_phone_digits">
                        {% for opt in PHONE_DIGITS_OPTIONS %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">내선번호 범위 시작</label>
                    <input type="number" class="form-input" id="extension_range_start"
                           min="100" max="99999" placeholder="100">
                </div>
                <div class="form-group">
                    <label class="form-label">내선번호 범위 종료</label>
                    <input type="number" class="form-input" id="extension_range_end"
                           min="100" max="99999" placeholder="999">
                </div>
                <div class="form-group">
                    <label class="form-label">할당 가능 범위</label>
                    <div class="form-preview">
                        <span class="form-preview-label">범위:</span>
                        <span class="form-preview-value" id="extension_range_preview">100 ~ 999</span>
                    </div>
                </div>
            </div>
        </div>

        {# 급여 설정 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-won-sign"></i>
                급여 설정
            </h2>
            <div class="form-row form-row--settings">
                <div class="form-group">
                    <label class="form-label">급여 지급일</label>
                    <select class="form-input" id="payment_day">
                        {% for day in range(1, 29) %}
                        <option value="{{ day }}">매월 {{ day }}일</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        {# IP 주소 관리 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-network-wired"></i>
                IP 주소 관리
            </h2>
            <div class="form-row form-row--settings">
                {{ settings_toggle('ip_auto_assign', 'IP 자동 할당', '직원에게 IP 자동 할당') }}
                <div class="form-group">
                    <label class="form-label">IP 대역 시작</label>
                    <input type="text" class="form-input" id="ip_range_start"
                           placeholder="192.168.1.100" pattern="^(\d{1,3}\.){3}\d{1,3}$">
                </div>
                <div class="form-group">
                    <label class="form-label">IP 대역 종료</label>
                    <input type="text" class="form-input" id="ip_range_end"
                           placeholder="192.168.1.200" pattern="^(\d{1,3}\.){3}\d{1,3}$">
                </div>
                <div class="form-group">
                    <label class="form-label">할당 가능 범위</label>
                    <div class="form-preview">
                        <span class="form-preview-label">범위:</span>
                        <span class="form-preview-value" id="ip_range_preview">192.168.1.100 ~ 192.168.1.200</span>
                    </div>
                </div>
            </div>
        </div>

        {# 자산번호 설정 #}
        <div class="form-section form-section--card">
            <h2 class="form-section-title">
                <i class="fas fa-laptop"></i>
                자산번호 설정
            </h2>
            <div class="form-row form-row--settings">
                <div class="form-group">
                    <label class="form-label">자산번호 접두어</label>
                    <input type="text" class="form-input" id="asset_number_prefix"
                           maxlength="10" placeholder="ASSET">
                </div>
                <div class="form-group">
                    <label class="form-label">자산번호 구분자</label>
                    <select class="form-input" id="asset_number_separator">
                        {% for opt in EMPLOYEE_NUMBER_SEPARATOR_OPTIONS %}
                        {% if opt.value != '/' %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">순번 자릿수</label>
                    <select class="form-input" id="asset_number_digits">
                        {% for opt in NUMBER_DIGITS_OPTIONS %}
                        {% if opt.value != '3' %}
                        <option value="{{ opt.value }}">{{ opt.label }}</option>
                        {% endif %}
                        {% endfor %}
                    </select>
                </div>
                {{ settings_preview('asset_number_preview', '미리보기', 'ASSET-0001') }}
            </div>
        </div>

        <div class="tab-actions">
            <button type="button" class="btn btn-primary" id="save-patterns">
                <i class="fas fa-save"></i>
                <span>설정 저장</span>
            </button>
        </div>
    </div>
</div>
