{% extends "shared/base.html" %}

{% block title %}
  {% if account_type == 'corporate' %}
    법인 대시보드 - {{ company.name }}
  {% elif account_type == 'employee_sub' %}
    직원 대시보드 - 인사카드 관리 시스템
  {% else %}
    개인 대시보드 - 인사카드 관리 시스템
  {% endif %}
{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title-row">
        <h1 class="page-title">
            {% if account_type == 'corporate' %}
                법인 대시보드
            {% elif account_type == 'employee_sub' %}
                내 대시보드
            {% else %}
                개인 대시보드
            {% endif %}
        </h1>
        <div class="page-actions">
            {% if account_type == 'corporate' %}
                {% if session.get('user_role') in ['admin', 'manager'] %}
                <a href="{{ url_for('corporate.settings') }}" class="btn btn--secondary">
                    <i class="fas fa-cog"></i>
                    <span>설정</span>
                </a>
                {% endif %}
            {% elif account_type == 'employee_sub' %}
                <a href="{{ url_for('profile.view') }}" class="btn btn--primary">
                    <i class="fas fa-user"></i>
                    <span>프로필 보기</span>
                </a>
            {% else %}
                <a href="{{ url_for('profile.view') }}" class="btn btn--primary">
                    <i class="fas fa-user"></i>
                    <span>프로필 보기</span>
                </a>
            {% endif %}
        </div>
    </div>
    <p class="page-description">
        {% if account_type == 'corporate' %}
            {{ company.name }} 관리 현황
        {% elif account_type == 'employee_sub' %}
            {{ employee.name }}님, 환영합니다!
        {% else %}
            {{ profile.name }}님, 환영합니다!
        {% endif %}
    </p>
</div>

<div class="dashboard-card-grid">
    <!-- 정보 카드 -->
    <div class="dashboard-card">
        <div class="card__header">
            <h2 class="card__title">
                <i class="fas fa-{% if account_type == 'corporate' %}info-circle{% else %}user-circle{% endif %}"></i>
                {% if account_type == 'corporate' %}법인 정보{% else %}프로필 요약{% endif %}
            </h2>
        </div>
        <div class="card__body">
            {% if account_type == 'corporate' %}
                {% include 'domains/user/dashboard/_info_corporate.html' %}
            {% elif account_type == 'employee_sub' %}
                {% include 'domains/user/dashboard/_info_employee.html' %}
            {% else %}
                {% include 'domains/user/dashboard/_info_personal.html' %}
            {% endif %}
        </div>
    </div>

    <!-- 직원 전용: 근무 현황 카드 -->
    {% if account_type == 'employee_sub' %}
    <div class="dashboard-card">
        <div class="card__header">
            <h2 class="card__title">
                <i class="fas fa-building"></i>
                근무 현황
            </h2>
        </div>
        <div class="card__body">
            {% include 'domains/user/dashboard/_work_status_employee.html' %}
        </div>
    </div>
    {% endif %}

    <!-- 현황/통계 카드 -->
    <div class="dashboard-card">
        <div class="card__header">
            <h2 class="card__title">
                <i class="fas fa-chart-bar"></i>
                {% if account_type == 'corporate' %}현황{% else %}이력 현황{% endif %}
            </h2>
        </div>
        <div class="card__body">
            <div class="stats-grid">
                {% if account_type == 'corporate' %}
                    {% include 'domains/user/dashboard/_stats_corporate.html' %}
                {% elif account_type == 'employee_sub' %}
                    {% include 'domains/user/dashboard/_stats_employee.html' %}
                {% else %}
                    {% include 'domains/user/dashboard/_stats_personal.html' %}
                {% endif %}
            </div>
        </div>
    </div>

    <!-- 빠른 메뉴 카드 -->
    <div class="dashboard-card quick-links-card">
        <div class="card__header">
            <h2 class="card__title">
                <i class="fas fa-bolt"></i>
                빠른 메뉴
            </h2>
        </div>
        <div class="card__body">
            <div class="quick-links">
                {% if account_type == 'corporate' %}
                    {% include 'domains/user/dashboard/_quick_links_corporate.html' %}
                {% elif account_type == 'employee_sub' %}
                    {% include 'domains/user/dashboard/_quick_links_employee.html' %}
                {% else %}
                    {% include 'domains/user/dashboard/_quick_links_personal.html' %}
                {% endif %}
            </div>
        </div>
    </div>

    <!-- 개인 전용: 공개 설정 카드 -->
    {% if account_type == 'personal' %}
    <div class="dashboard-card">
        <div class="card__header">
            <h2 class="card__title">
                <i class="fas fa-eye"></i>
                공개 설정
            </h2>
        </div>
        <div class="card__body">
            {% include 'domains/user/dashboard/_visibility_status.html' %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
