{% extends "base.html" %}

{% block title %}플랫폼 대시보드 - HR Management{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/domains/platform/platform.css') }}">
{% endblock %}

{% block content %}
<div class="platform-dashboard">
    <div class="page-header">
        <div class="page-title-section">
            <h2 class="page-title">
                <i class="fas fa-crown"></i>
                플랫폼 대시보드
            </h2>
            <p class="page-subtitle">시스템 전체 현황을 확인합니다</p>
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon users">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.total_users }}</h3>
                <p>전체 사용자</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon companies">
                <i class="fas fa-building"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.total_companies }}</h3>
                <p>등록 법인</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon active">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.active_companies }}</h3>
                <p>활성 법인</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon contracts">
                <i class="fas fa-file-contract"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.active_contracts }}</h3>
                <p>활성 계약</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon superadmin">
                <i class="fas fa-crown"></i>
            </div>
            <div class="stat-info">
                <h3>{{ stats.superadmins }}</h3>
                <p>슈퍼관리자</p>
            </div>
        </div>
    </div>

    <div class="dashboard-grid">
        <div class="dashboard-card">
            <div class="card-header">
                <h3><i class="fas fa-user-plus"></i> 최근 가입 사용자</h3>
                <a href="{{ url_for('platform.users_list') }}" class="btn btn-sm btn-secondary">
                    전체 보기
                </a>
            </div>
            <div class="card-body">
                {% if recent_users %}
                <ul class="recent-list">
                    {% for user in recent_users %}
                    <li class="recent-item">
                        <div class="item-info">
                            <span class="item-name">{{ user.username }}</span>
                            <span class="item-meta">{{ user.email }}</span>
                        </div>
                        <span class="item-badge {{ user.account_type }}">
                            {{ user.get_account_type_label() }}
                        </span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="empty-message">최근 가입한 사용자가 없습니다.</p>
                {% endif %}
            </div>
        </div>

        <div class="dashboard-card">
            <div class="card-header">
                <h3><i class="fas fa-building"></i> 최근 등록 법인</h3>
                <a href="{{ url_for('platform.companies_list') }}" class="btn btn-sm btn-secondary">
                    전체 보기
                </a>
            </div>
            <div class="card-body">
                {% if recent_companies %}
                <ul class="recent-list">
                    {% for company in recent_companies %}
                    <li class="recent-item">
                        <div class="item-info">
                            <span class="item-name">{{ company.name }}</span>
                            <span class="item-meta">{{ company.business_number or '-' }}</span>
                        </div>
                        <span class="item-badge {{ 'active' if company.is_active else 'inactive' }}">
                            {{ '활성' if company.is_active else '비활성' }}
                        </span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="empty-message">등록된 법인이 없습니다.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="quick-actions">
        <h3><i class="fas fa-bolt"></i> 빠른 작업</h3>
        <div class="action-buttons">
            <a href="{{ url_for('platform.companies_list') }}" class="action-btn">
                <i class="fas fa-building"></i>
                법인 관리
            </a>
            <a href="{{ url_for('platform.users_list') }}" class="action-btn">
                <i class="fas fa-users"></i>
                사용자 관리
            </a>
            <a href="{{ url_for('platform.settings_list') }}" class="action-btn">
                <i class="fas fa-cog"></i>
                시스템 설정
            </a>
        </div>
    </div>
</div>
{% endblock %}
