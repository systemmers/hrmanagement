{#
    섹션 네비게이션 매크로
    - section_nav: 통합 섹션 네비게이션
    - section_nav_item: 개별 네비게이션 항목
    - section_nav_group: 네비게이션 그룹
#}

{# 네비게이션 항목 #}
{% macro section_nav_item(href, icon, label, active=false, suffix='') %}
<a href="{{ href }}" class="section-nav-item{% if active %} active{% endif %}">
    <i class="fas {{ icon }}"></i>
    <span>{{ label }}{{ suffix }}</span>
</a>
{% endmacro %}

{# 네비게이션 그룹 #}
{% macro section_nav_group(title, items) %}
<div class="section-nav-group">
    <div class="section-nav-group-title">{{ title }}</div>
    {% for item in items %}
    {{ section_nav_item(item.href, item.icon, item.label, item.active|default(false), item.suffix|default('')) }}
    {% endfor %}
</div>
{% endmacro %}

{#
통합 섹션 네비게이션
Parameters:
  - title: 네비게이션 타이틀
  - subtitle: 서브타이틀 (보통 직원명)
  - variant: 'full' | 'basic' | 'history' | 'company' | 'form'
  - employee: 직원 객체 (선택적)
  - is_employee_role: 직원 역할 여부 (폼에서 사용)
#}
{% macro section_nav(title, subtitle, variant='full', employee=none, is_employee_role=false) %}
<aside class="section-nav" id="sectionNav">
    <div class="section-nav-header">
        <div class="section-nav-title">{{ title }}</div>
        <div class="section-nav-subtitle">{{ subtitle }}</div>
    </div>
    <nav class="section-nav-menu">
        {% if variant == 'full' %}
        {# 전체 인사카드 네비게이션 #}
        <div class="section-nav-group">
            <div class="section-nav-group-title">기본정보</div>
            {{ section_nav_item('#personal-info', 'fa-user', '개인 기본정보', true) }}
            {{ section_nav_item('#organization-info', 'fa-building', '소속정보') }}
            {{ section_nav_item('#contract-info', 'fa-file-contract', '계약정보') }}
            {{ section_nav_item('#salary-info', 'fa-won-sign', '급여정보') }}
            {{ section_nav_item('#benefit-info', 'fa-umbrella-beach', '연차 및 복리후생') }}
            {{ section_nav_item('#insurance-info', 'fa-shield-alt', '4대보험') }}
            {{ section_nav_item('#family-info', 'fa-users', '가족정보') }}
        </div>
        <div class="section-nav-group">
            <div class="section-nav-group-title">이력 및 경력</div>
            {{ section_nav_item('#education-info', 'fa-graduation-cap', '학력정보') }}
            {{ section_nav_item('#career-info', 'fa-briefcase', '경력정보') }}
            {{ section_nav_item('#certificate-info', 'fa-certificate', '자격증 및 면허') }}
            {{ section_nav_item('#language-info', 'fa-language', '언어능력') }}
            {{ section_nav_item('#military-info', 'fa-medal', '병역/프로젝트/수상') }}
        </div>
        <div class="section-nav-group">
            <div class="section-nav-group-title">인사기록</div>
            {{ section_nav_item('#employment-contract', 'fa-file-signature', '근로계약 및 연봉') }}
            {{ section_nav_item('#personnel-movement', 'fa-arrow-up', '인사이동 및 고과') }}
            {{ section_nav_item('#attendance-assets', 'fa-calendar-check', '근태 및 비품') }}
        </div>

        {% elif variant == 'basic' %}
        {# 기본정보 전용 #}
        <div class="section-nav-group">
            <div class="section-nav-group-title">개인정보</div>
            {{ section_nav_item('#personal-info', 'fa-user', '개인 기본정보', true) }}
            {{ section_nav_item('#family-info', 'fa-users', '가족정보') }}
        </div>

        {% elif variant == 'history' %}
        {# 이력정보 전용 #}
        <div class="section-nav-group">
            <div class="section-nav-group-title">이력 및 경력</div>
            {{ section_nav_item('#education-info', 'fa-graduation-cap', '학력정보', true) }}
            {{ section_nav_item('#career-info', 'fa-briefcase', '경력정보') }}
            {{ section_nav_item('#certificate-info', 'fa-certificate', '자격증 및 면허') }}
            {{ section_nav_item('#language-info', 'fa-language', '언어능력') }}
            {{ section_nav_item('#military-info', 'fa-medal', '병역/프로젝트/수상') }}
        </div>

        {% elif variant == 'company' %}
        {# 회사 인사카드 #}
        <div class="section-nav-group">
            <div class="section-nav-group-title">소속 및 계약</div>
            {{ section_nav_item('#organization-info', 'fa-building', '소속정보', true) }}
            {{ section_nav_item('#contract-info', 'fa-file-contract', '계약정보') }}
        </div>
        <div class="section-nav-group">
            <div class="section-nav-group-title">급여 및 복리후생</div>
            {{ section_nav_item('#salary-info', 'fa-won-sign', '급여정보') }}
            {{ section_nav_item('#benefit-info', 'fa-umbrella-beach', '연차 및 복리후생') }}
            {{ section_nav_item('#insurance-info', 'fa-shield-alt', '4대보험') }}
        </div>
        <div class="section-nav-group">
            <div class="section-nav-group-title">인사기록</div>
            {{ section_nav_item('#employment-contract', 'fa-file-signature', '근로계약 및 연봉') }}
            {{ section_nav_item('#personnel-movement', 'fa-arrow-up', '인사이동 및 고과') }}
            {{ section_nav_item('#attendance-assets', 'fa-calendar-check', '근태 및 비품') }}
        </div>

        {% elif variant == 'form' %}
        {# 폼 네비게이션 (역할 기반) #}
        <div class="nav-group">
            <div class="nav-group-title">기본정보</div>
            {{ section_nav_item('#personal-info', 'fa-user', '개인 기본정보', true) }}
            {{ section_nav_item('#organization-info', 'fa-building', '소속정보', false, ' (읽기전용)' if is_employee_role else '') }}
            {% if not is_employee_role %}
            {{ section_nav_item('#contract-info', 'fa-file-contract', '계약정보') }}
            {% endif %}
        </div>
        <div class="nav-group">
            <div class="nav-group-title">이력 및 경력</div>
            {{ section_nav_item('#education-info', 'fa-graduation-cap', '학력정보') }}
            {{ section_nav_item('#career-info', 'fa-briefcase', '경력정보') }}
            {{ section_nav_item('#certificate-info', 'fa-certificate', '자격증') }}
            {{ section_nav_item('#language-info', 'fa-language', '언어능력') }}
            {% if not is_employee_role %}
            {{ section_nav_item('#project-info', 'fa-project-diagram', '프로젝트') }}
            {% endif %}
        </div>
        <div class="nav-group">
            <div class="nav-group-title">부가정보</div>
            {{ section_nav_item('#military-info', 'fa-shield-alt', '병역정보') }}
            {{ section_nav_item('#family-info', 'fa-users', '가족사항') }}
        </div>
        {% if not is_employee_role %}
        <div class="nav-group">
            <div class="nav-group-title">급여 및 보험</div>
            {{ section_nav_item('#salary-info', 'fa-won-sign', '급여정보') }}
            {{ section_nav_item('#insurance-info', 'fa-shield-alt', '4대보험') }}
        </div>
        {% endif %}

        {% elif variant == 'profile' %}
        {# 개인 프로필 수정 네비게이션 #}
        <div class="section-nav-group">
            <div class="section-nav-group-title">기본정보</div>
            {{ section_nav_item('#personal-info', 'fa-user', '개인 기본정보', true) }}
            {{ section_nav_item('#contact-info', 'fa-phone', '연락처 정보') }}
            {{ section_nav_item('#address-info', 'fa-map-marker-alt', '주소 정보') }}
        </div>
        <div class="section-nav-group">
            <div class="section-nav-group-title">부가정보</div>
            {{ section_nav_item('#other-info', 'fa-info-circle', '기타 정보') }}
            {{ section_nav_item('#visibility-settings', 'fa-eye', '공개 설정') }}
        </div>
        {% endif %}
    </nav>
</aside>
{% endmacro %}
