{% extends "base.html" %}

{% block title %}개인 대시보드 - 인사카드 관리 시스템{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title-row">
        <h1 class="page-title">개인 대시보드</h1>
        <div class="page-actions">
            <a href="{{ url_for('personal.profile') }}" class="btn btn-secondary">
                <i class="fas fa-user"></i>
                <span>프로필 보기</span>
            </a>
            <a href="{{ url_for('personal.profile_edit') }}" class="btn btn-primary">
                <i class="fas fa-edit"></i>
                <span>프로필 수정</span>
            </a>
        </div>
    </div>
    <p class="page-description">{{ profile.name }}님, 환영합니다!</p>
</div>

<div class="dashboard-grid">
    <!-- 프로필 요약 카드 -->
    <div class="dashboard-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-user-circle"></i>
                프로필 요약
            </h2>
        </div>
        <div class="card-body">
            <div class="profile-summary">
                <div class="profile-avatar">
                    {% if profile.photo %}
                    <img src="{{ profile.photo }}" alt="{{ profile.name }}">
                    {% else %}
                    <div class="avatar-placeholder">{{ profile.name[:1] }}</div>
                    {% endif %}
                </div>
                <div class="profile-info">
                    <h3 class="profile-name">{{ profile.name }}</h3>
                    {% if profile.english_name %}
                    <p class="profile-english-name">{{ profile.english_name }}</p>
                    {% endif %}
                    <div class="profile-details">
                        {% if profile.email %}
                        <span class="detail-item">
                            <i class="fas fa-envelope"></i>
                            {{ profile.email }}
                        </span>
                        {% endif %}
                        {% if profile.mobile_phone %}
                        <span class="detail-item">
                            <i class="fas fa-phone"></i>
                            {{ profile.mobile_phone }}
                        </span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 이력 현황 카드 -->
    <div class="dashboard-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-chart-bar"></i>
                이력 현황
            </h2>
        </div>
        <div class="card-body">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-icon education">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value">{{ stats.education_count }}</span>
                        <span class="stat-label">학력</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon career">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value">{{ stats.career_count }}</span>
                        <span class="stat-label">경력</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon certificate">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value">{{ stats.certificate_count }}</span>
                        <span class="stat-label">자격증</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon language">
                        <i class="fas fa-language"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-value">{{ stats.language_count }}</span>
                        <span class="stat-label">어학</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 빠른 메뉴 카드 -->
    <div class="dashboard-card quick-links-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-bolt"></i>
                빠른 메뉴
            </h2>
        </div>
        <div class="card-body">
            <div class="quick-links">
                <a href="{{ url_for('personal.profile_edit') }}" class="quick-link">
                    <i class="fas fa-user-edit"></i>
                    <span>프로필 수정</span>
                </a>
                <a href="{{ url_for('personal.profile') }}#education" class="quick-link">
                    <i class="fas fa-graduation-cap"></i>
                    <span>학력 관리</span>
                </a>
                <a href="{{ url_for('personal.profile') }}#career" class="quick-link">
                    <i class="fas fa-briefcase"></i>
                    <span>경력 관리</span>
                </a>
                <a href="{{ url_for('personal.profile') }}#certificate" class="quick-link">
                    <i class="fas fa-certificate"></i>
                    <span>자격증 관리</span>
                </a>
            </div>
        </div>
    </div>

    <!-- 프로필 공개 상태 카드 -->
    <div class="dashboard-card">
        <div class="card-header">
            <h2 class="card-title">
                <i class="fas fa-eye"></i>
                공개 설정
            </h2>
        </div>
        <div class="card-body">
            <div class="visibility-status">
                {% if profile.is_public %}
                <div class="status-badge public">
                    <i class="fas fa-globe"></i>
                    <span>프로필 공개 중</span>
                </div>
                <p class="status-description">기업이 회원님의 프로필을 조회할 수 있습니다.</p>
                {% else %}
                <div class="status-badge private">
                    <i class="fas fa-lock"></i>
                    <span>프로필 비공개</span>
                </div>
                <p class="status-description">프로필이 비공개 상태입니다. 구직 활동 시 공개로 변경하세요.</p>
                {% endif %}
                <a href="{{ url_for('personal.profile_edit') }}" class="btn btn-sm btn-secondary" style="margin-top: 16px;">
                    공개 설정 변경
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: var(--space-6);
    margin-top: var(--space-6);
}

.dashboard-card {
    background: var(--color-pure-white);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-gray-200);
    overflow: hidden;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--color-gray-200);
    background: var(--color-gray-50);
}

.card-title {
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--color-gray-700);
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.card-title i {
    color: #10b981;
}

.card-body {
    padding: var(--space-5);
}

/* 프로필 요약 */
.profile-summary {
    display: flex;
    align-items: center;
    gap: var(--space-5);
}

.profile-avatar {
    flex-shrink: 0;
}

.profile-avatar img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
}

.avatar-placeholder {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-2xl);
    font-weight: 700;
}

.profile-info {
    flex: 1;
}

.profile-name {
    font-size: var(--text-xl);
    font-weight: 700;
    color: var(--color-gray-900);
    margin: 0 0 var(--space-1);
}

.profile-english-name {
    font-size: var(--text-sm);
    color: var(--color-gray-500);
    margin: 0 0 var(--space-3);
}

.profile-details {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.detail-item {
    font-size: var(--text-sm);
    color: var(--color-gray-600);
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.detail-item i {
    width: 16px;
    color: var(--color-gray-400);
}

/* 통계 */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-5);
}

.stat-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-xl);
}

.stat-icon.education {
    background: #dbeafe;
    color: #2563eb;
}

.stat-icon.career {
    background: #dcfce7;
    color: #16a34a;
}

.stat-icon.certificate {
    background: #fef3c7;
    color: #d97706;
}

.stat-icon.language {
    background: #fce7f3;
    color: #db2777;
}

.stat-content {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--color-gray-900);
}

.stat-label {
    font-size: var(--text-xs);
    color: var(--color-gray-500);
}

/* 빠른 링크 */
.quick-links {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-3);
}

.quick-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-5);
    background: var(--color-gray-50);
    border-radius: var(--radius-md);
    text-decoration: none;
    color: var(--color-gray-700);
    transition: all var(--transition-fast);
}

.quick-link:hover {
    background: #10b981;
    color: var(--color-pure-white);
    transform: translateY(-2px);
}

.quick-link i {
    font-size: var(--text-2xl);
}

.quick-link span {
    font-size: var(--text-sm);
    font-weight: 500;
}

/* 공개 상태 */
.visibility-status {
    text-align: center;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-full);
    font-weight: 600;
    font-size: var(--text-sm);
}

.status-badge.public {
    background: #dcfce7;
    color: #16a34a;
}

.status-badge.private {
    background: #f3f4f6;
    color: #6b7280;
}

.status-description {
    color: var(--color-gray-600);
    font-size: var(--text-sm);
    margin: var(--space-3) 0 0;
}

@media (max-width: 768px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }

    .stats-grid,
    .quick-links {
        grid-template-columns: 1fr;
    }

    .profile-summary {
        flex-direction: column;
        text-align: center;
    }
}
</style>
{% endblock %}
