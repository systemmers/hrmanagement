{% extends "base.html" %}

{% block title %}내 프로필 - 인사카드 관리 시스템{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title-row">
        <h1 class="page-title">내 프로필</h1>
        <div class="page-actions">
            <a href="{{ url_for('personal.dashboard') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                <span>대시보드로</span>
            </a>
            <a href="{{ url_for('personal.profile_edit') }}" class="btn btn-primary">
                <i class="fas fa-edit"></i>
                <span>프로필 수정</span>
            </a>
        </div>
    </div>
</div>

<div class="profile-container">
    <!-- 기본 정보 섹션 -->
    <div class="profile-section">
        <h2 class="section-title">
            <i class="fas fa-user"></i>
            기본 정보
        </h2>
        <div class="profile-card">
            <div class="profile-header-info">
                <div class="profile-avatar-large">
                    {% if profile.photo %}
                    <img src="{{ profile.photo }}" alt="{{ profile.name }}">
                    {% else %}
                    <div class="avatar-placeholder-large">{{ profile.name[:1] }}</div>
                    {% endif %}
                </div>
                <div class="profile-main-info">
                    <h3 class="profile-name">{{ profile.name }}</h3>
                    {% if profile.english_name %}
                    <p class="profile-sub-name">{{ profile.english_name }}</p>
                    {% endif %}
                    {% if profile.chinese_name %}
                    <p class="profile-sub-name">{{ profile.chinese_name }}</p>
                    {% endif %}
                </div>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">생년월일</span>
                    <span class="info-value">
                        {{ profile.birth_date or '-' }}
                        {% if profile.lunar_birth %}<span class="badge badge-secondary">음력</span>{% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-label">성별</span>
                    <span class="info-value">{{ profile.gender or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">나이</span>
                    <span class="info-value">{{ profile.age or '-' }}세</span>
                </div>
                <div class="info-item">
                    <span class="info-label">국적</span>
                    <span class="info-value">{{ profile.nationality or '-' }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 연락처 정보 섹션 -->
    <div class="profile-section">
        <h2 class="section-title">
            <i class="fas fa-phone"></i>
            연락처 정보
        </h2>
        <div class="profile-card">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">휴대전화</span>
                    <span class="info-value">{{ profile.mobile_phone or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">자택전화</span>
                    <span class="info-value">{{ profile.home_phone or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">이메일</span>
                    <span class="info-value">{{ profile.email or '-' }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 주소 정보 섹션 -->
    <div class="profile-section">
        <h2 class="section-title">
            <i class="fas fa-map-marker-alt"></i>
            주소 정보
        </h2>
        <div class="profile-card">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">우편번호</span>
                    <span class="info-value">{{ profile.postal_code or '-' }}</span>
                </div>
                <div class="info-item full-width">
                    <span class="info-label">주소</span>
                    <span class="info-value">{{ profile.full_address or '-' }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 기타 정보 섹션 -->
    <div class="profile-section">
        <h2 class="section-title">
            <i class="fas fa-info-circle"></i>
            기타 정보
        </h2>
        <div class="profile-card">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">혈액형</span>
                    <span class="info-value">{{ profile.blood_type or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">종교</span>
                    <span class="info-value">{{ profile.religion or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">취미</span>
                    <span class="info-value">{{ profile.hobby or '-' }}</span>
                </div>
                <div class="info-item">
                    <span class="info-label">특기</span>
                    <span class="info-value">{{ profile.specialty or '-' }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 학력 정보 섹션 -->
    <div class="profile-section" id="education">
        <h2 class="section-title">
            <i class="fas fa-graduation-cap"></i>
            학력
            <span class="count-badge">{{ profile.educations.count() }}</span>
        </h2>
        <div class="profile-card">
            {% if profile.educations.count() > 0 %}
            <div class="history-list">
                {% for edu in profile.educations.order_by('-graduation_date') %}
                <div class="history-item">
                    <div class="history-icon education">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="history-content">
                        <h4 class="history-title">{{ edu.school_name }}</h4>
                        <p class="history-subtitle">{{ edu.major or '' }} {{ edu.degree or '' }}</p>
                        <p class="history-period">
                            {{ edu.admission_date or '' }} ~ {{ edu.graduation_date or '' }}
                            {% if edu.status %}
                            <span class="badge badge-secondary">{{ edu.status }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <p>등록된 학력 정보가 없습니다.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- 경력 정보 섹션 -->
    <div class="profile-section" id="career">
        <h2 class="section-title">
            <i class="fas fa-briefcase"></i>
            경력
            <span class="count-badge">{{ profile.careers.count() }}</span>
        </h2>
        <div class="profile-card">
            {% if profile.careers.count() > 0 %}
            <div class="history-list">
                {% for career in profile.careers.order_by('-start_date') %}
                <div class="history-item">
                    <div class="history-icon career">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <div class="history-content">
                        <h4 class="history-title">{{ career.company_name }}</h4>
                        <p class="history-subtitle">
                            {{ career.department or '' }}
                            {% if career.position %}/ {{ career.position }}{% endif %}
                        </p>
                        <p class="history-period">
                            {{ career.start_date or '' }} ~
                            {% if career.is_current %}
                            <span class="badge badge-success">재직중</span>
                            {% else %}
                            {{ career.end_date or '' }}
                            {% endif %}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <p>등록된 경력 정보가 없습니다.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- 자격증 정보 섹션 -->
    <div class="profile-section" id="certificate">
        <h2 class="section-title">
            <i class="fas fa-certificate"></i>
            자격증
            <span class="count-badge">{{ profile.certificates.count() }}</span>
        </h2>
        <div class="profile-card">
            {% if profile.certificates.count() > 0 %}
            <div class="history-list">
                {% for cert in profile.certificates.order_by('-issue_date') %}
                <div class="history-item">
                    <div class="history-icon certificate">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <div class="history-content">
                        <h4 class="history-title">{{ cert.name }}</h4>
                        <p class="history-subtitle">{{ cert.issuing_organization or '' }}</p>
                        <p class="history-period">
                            {{ cert.issue_date or '' }}
                            {% if cert.grade %}
                            <span class="badge badge-info">{{ cert.grade }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <p>등록된 자격증 정보가 없습니다.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- 어학 정보 섹션 -->
    <div class="profile-section" id="language">
        <h2 class="section-title">
            <i class="fas fa-language"></i>
            어학
            <span class="count-badge">{{ profile.languages.count() }}</span>
        </h2>
        <div class="profile-card">
            {% if profile.languages.count() > 0 %}
            <div class="history-list">
                {% for lang in profile.languages %}
                <div class="history-item">
                    <div class="history-icon language">
                        <i class="fas fa-language"></i>
                    </div>
                    <div class="history-content">
                        <h4 class="history-title">{{ lang.language }}</h4>
                        <p class="history-subtitle">
                            {% if lang.test_name %}{{ lang.test_name }}{% endif %}
                            {% if lang.score %}: {{ lang.score }}{% endif %}
                        </p>
                        <p class="history-period">
                            {% if lang.proficiency %}
                            <span class="badge badge-primary">{{ lang.proficiency }}</span>
                            {% endif %}
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <p>등록된 어학 정보가 없습니다.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- CSS moved to: components/info-grid.css, badges.css, empty-state.css + profile-specific styles in forms.css -->
{% endblock %}
