{% extends "base.html" %}
{% from 'macros/_contracts.html' import contract_stats_row_company, contract_filter_bar, contract_table_row %}

{% block title %}기업 계약 관리 - 인사카드 관리 시스템{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title-row">
        <h1 class="page-title">기업 계약 관리</h1>
        <div class="page-actions">
            <a href="{{ url_for('contracts.company_pending') }}" class="btn btn-secondary">
                <i class="fas fa-clock"></i>
                <span>대기 중 ({{ stats.pending or 0 }})</span>
            </a>
            <a href="{{ url_for('contracts.request_contract') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                <span>계약 요청</span>
            </a>
        </div>
    </div>
    <p class="page-description">개인 회원과의 계약 관계를 관리합니다.</p>
</div>

<!-- 통계 카드 -->
{{ contract_stats_row_company(stats) }}

<!-- 검색 및 필터 -->
{{ contract_filter_bar(show_type_filter=true) }}

<!-- 계약 테이블 -->
<div class="contracts-table-wrapper">
    <table class="contracts-table">
        <thead>
            <tr>
                <th>이름</th>
                <th>부서</th>
                <th>직위</th>
                <th>계약 유형</th>
                <th>상태</th>
                <th>승인일</th>
                <th>액션</th>
            </tr>
        </thead>
        <tbody id="contractsTableBody">
            {% if contracts %}
                {% for contract in contracts %}
                    {{ contract_table_row(contract) }}
                {% endfor %}
            {% else %}
            <tr>
                <td colspan="7" class="empty-cell">
                    <div class="empty-state-inline">
                        <i class="fas fa-file-contract"></i>
                        <span>계약 내역이 없습니다.</span>
                    </div>
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<!-- CSS: components/stats-cards.css, contracts.css, badges.css, info-grid.css, empty-state.css -->
<!-- JS: utils/contract-api.js, pages/contracts.js -->
<script src="{{ url_for('static', filename='js/utils/contract-api.js') }}"></script>
<script src="{{ url_for('static', filename='js/pages/contracts.js') }}"></script>
{% endblock %}
