{% extends 'base.html' %}

{% block title %}법인 관리자 프로필 생성 - HR Management{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/register.css') }}">
<style>
.admin-profile-form {
    max-width: 800px;
    margin: 0 auto;
    padding: var(--spacing-6);
}

.admin-profile-form__header {
    text-align: center;
    margin-bottom: var(--spacing-8);
}

.admin-profile-form__title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-gray-900);
    margin-bottom: var(--spacing-2);
}

.admin-profile-form__subtitle {
    font-size: var(--font-size-base);
    color: var(--color-gray-600);
}

.admin-profile-form__section {
    background: var(--color-white);
    border-radius: var(--radius-lg);
    padding: var(--spacing-6);
    margin-bottom: var(--spacing-6);
    box-shadow: var(--shadow-sm);
}

.admin-profile-form__section-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
    color: var(--color-gray-800);
    margin-bottom: var(--spacing-4);
    padding-bottom: var(--spacing-2);
    border-bottom: 1px solid var(--color-gray-200);
}

.admin-profile-form__row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-4);
}

.admin-profile-form__group {
    margin-bottom: var(--spacing-4);
}

.admin-profile-form__label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-gray-700);
    margin-bottom: var(--spacing-2);
}

.admin-profile-form__input,
.admin-profile-form__textarea {
    width: 100%;
    padding: var(--spacing-3);
    border: 1px solid var(--color-gray-300);
    border-radius: var(--radius-md);
    font-size: var(--font-size-base);
    transition: border-color 0.2s, box-shadow 0.2s;
}

.admin-profile-form__input:focus,
.admin-profile-form__textarea:focus {
    outline: none;
    border-color: var(--color-primary-500);
    box-shadow: 0 0 0 3px var(--color-primary-100);
}

.admin-profile-form__textarea {
    min-height: 100px;
    resize: vertical;
}

.admin-profile-form__actions {
    display: flex;
    gap: var(--spacing-4);
    justify-content: flex-end;
}

.admin-profile-form__btn {
    padding: var(--spacing-3) var(--spacing-6);
    border-radius: var(--radius-md);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s;
}

.admin-profile-form__btn--primary {
    background: var(--color-primary-600);
    color: var(--color-white);
    border: none;
}

.admin-profile-form__btn--primary:hover {
    background: var(--color-primary-700);
}

.admin-profile-form__btn--secondary {
    background: var(--color-white);
    color: var(--color-gray-700);
    border: 1px solid var(--color-gray-300);
}

.admin-profile-form__btn--secondary:hover {
    background: var(--color-gray-50);
}

@media (max-width: 768px) {
    .admin-profile-form__row {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="admin-profile-form">
    <div class="admin-profile-form__header">
        <h1 class="admin-profile-form__title">법인 관리자 프로필 생성</h1>
        <p class="admin-profile-form__subtitle">프로필 정보를 입력하여 서비스를 시작하세요</p>
    </div>

    <!-- Flash 메시지 -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert--{{ category }}" style="margin-bottom: var(--spacing-4);">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" class="admin-profile-form__form">
        <!-- 기본 정보 섹션 -->
        <div class="admin-profile-form__section">
            <h3 class="admin-profile-form__section-title">
                <i class="fas fa-user"></i> 기본 정보
            </h3>

            <div class="admin-profile-form__row">
                <div class="admin-profile-form__group">
                    <label for="name" class="admin-profile-form__label">
                        이름 <span class="text-error-500">*</span>
                    </label>
                    <input type="text"
                           id="name"
                           name="name"
                           class="admin-profile-form__input"
                           placeholder="홍길동"
                           value="{{ form_data.get('name', '') }}"
                           required>
                </div>

                <div class="admin-profile-form__group">
                    <label for="english_name" class="admin-profile-form__label">
                        영문 이름
                    </label>
                    <input type="text"
                           id="english_name"
                           name="english_name"
                           class="admin-profile-form__input"
                           placeholder="Gil Dong Hong"
                           value="{{ form_data.get('english_name', '') }}">
                </div>
            </div>

            <div class="admin-profile-form__row">
                <div class="admin-profile-form__group">
                    <label for="position" class="admin-profile-form__label">
                        직책
                    </label>
                    <input type="text"
                           id="position"
                           name="position"
                           class="admin-profile-form__input"
                           placeholder="대표이사, CEO, CFO 등"
                           value="{{ form_data.get('position', '') }}">
                </div>

                <div class="admin-profile-form__group">
                    <label for="department" class="admin-profile-form__label">
                        소속 부서
                    </label>
                    <input type="text"
                           id="department"
                           name="department"
                           class="admin-profile-form__input"
                           placeholder="경영지원팀"
                           value="{{ form_data.get('department', '') }}">
                </div>
            </div>
        </div>

        <!-- 연락처 정보 섹션 -->
        <div class="admin-profile-form__section">
            <h3 class="admin-profile-form__section-title">
                <i class="fas fa-phone"></i> 연락처 정보
            </h3>

            <div class="admin-profile-form__row">
                <div class="admin-profile-form__group">
                    <label for="mobile_phone" class="admin-profile-form__label">
                        휴대전화
                    </label>
                    <input type="tel"
                           id="mobile_phone"
                           name="mobile_phone"
                           class="admin-profile-form__input"
                           placeholder="010-0000-0000"
                           value="{{ form_data.get('mobile_phone', '') }}">
                </div>

                <div class="admin-profile-form__group">
                    <label for="office_phone" class="admin-profile-form__label">
                        사무실 전화
                    </label>
                    <input type="tel"
                           id="office_phone"
                           name="office_phone"
                           class="admin-profile-form__input"
                           placeholder="02-0000-0000"
                           value="{{ form_data.get('office_phone', '') }}">
                </div>
            </div>

            <div class="admin-profile-form__group">
                <label for="email" class="admin-profile-form__label">
                    이메일
                </label>
                <input type="email"
                       id="email"
                       name="email"
                       class="admin-profile-form__input"
                       placeholder="admin@company.com"
                       value="{{ form_data.get('email', '') or user.email }}">
            </div>
        </div>

        <!-- 소개 섹션 -->
        <div class="admin-profile-form__section">
            <h3 class="admin-profile-form__section-title">
                <i class="fas fa-comment"></i> 소개
            </h3>

            <div class="admin-profile-form__group">
                <label for="bio" class="admin-profile-form__label">
                    간략한 소개
                </label>
                <textarea id="bio"
                          name="bio"
                          class="admin-profile-form__textarea"
                          placeholder="간략한 자기소개를 입력하세요">{{ form_data.get('bio', '') }}</textarea>
            </div>
        </div>

        <!-- 버튼 -->
        <div class="admin-profile-form__actions">
            <a href="{{ url_for('main.index') }}" class="admin-profile-form__btn admin-profile-form__btn--secondary">
                취소
            </a>
            <button type="submit" class="admin-profile-form__btn admin-profile-form__btn--primary">
                <i class="fas fa-check"></i> 프로필 생성
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/utils/formatting.js') }}"></script>
<script>
    // 전화번호 입력 필드 자동 포맷팅 초기화
    if (window.HRFormatters) {
        window.HRFormatters.initPhoneInputs();
    }
</script>
{% endblock %}
