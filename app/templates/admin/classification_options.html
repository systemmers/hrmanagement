{% extends "base.html" %}

{% block title %}분류 옵션 관리 - 인사카드 관리 시스템{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-title-row">
        <h1 class="page-title">분류 옵션 관리</h1>
    </div>
    <p class="page-description">부서, 직급, 상태 옵션을 관리합니다.</p>
</div>

<!-- 부서 관리 -->
<div class="options-section">
    <div class="options-header">
        <h2 class="options-title">
            <i class="fas fa-building"></i>
            부서 관리
        </h2>
        <button class="btn btn-primary" onclick="showAddDepartmentModal()">
            <i class="fas fa-plus"></i>
            <span>부서 추가</span>
        </button>
    </div>
    <div class="options-list" id="departments-list">
        {% for dept in classification_options.departments %}
        <div class="options-item">
            <span class="options-item-name">{{ dept }}</span>
            <div class="options-item-actions">
                <button class="btn-icon" onclick="editDepartment('{{ dept }}')" title="수정">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon" onclick="deleteDepartment('{{ dept }}')" title="삭제">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- 직급 관리 -->
<div class="options-section">
    <div class="options-header">
        <h2 class="options-title">
            <i class="fas fa-user-tie"></i>
            직급 관리
        </h2>
        <button class="btn btn-primary" onclick="showAddPositionModal()">
            <i class="fas fa-plus"></i>
            <span>직급 추가</span>
        </button>
    </div>
    <div class="options-list" id="positions-list">
        {% for pos in classification_options.positions %}
        <div class="options-item">
            <span class="options-item-name">{{ pos }}</span>
            <div class="options-item-actions">
                <button class="btn-icon" onclick="editPosition('{{ pos }}')" title="수정">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon" onclick="deletePosition('{{ pos }}')" title="삭제">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- 상태 관리 -->
<div class="options-section">
    <div class="options-header">
        <h2 class="options-title">
            <i class="fas fa-info-circle"></i>
            상태 관리
        </h2>
        <button class="btn btn-primary" onclick="showAddStatusModal()">
            <i class="fas fa-plus"></i>
            <span>상태 추가</span>
        </button>
    </div>
    <div class="options-list" id="statuses-list">
        {% for status in classification_options.statuses %}
        <div class="options-item">
            <span class="options-item-name">
                <span class="status-label">{{ status.label }}</span>
                <span class="status-value">({{ status.value }})</span>
            </span>
            <div class="options-item-actions">
                <button class="btn-icon" onclick="editStatus('{{ status.value }}', '{{ status.label }}')" title="수정">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon" onclick="deleteStatus('{{ status.value }}')" title="삭제">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- 모달 (부서 추가/수정) -->
<div class="modal hidden" id="department-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="department-modal-title">부서 추가</h3>
            <button class="modal-close" onclick="closeDepartmentModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">부서명</label>
                <input type="text" class="form-input" id="department-input" placeholder="예: 개발팀">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeDepartmentModal()">취소</button>
            <button class="btn btn-primary" onclick="saveDepartment()">저장</button>
        </div>
    </div>
</div>

<!-- 모달 (직급 추가/수정) -->
<div class="modal hidden" id="position-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="position-modal-title">직급 추가</h3>
            <button class="modal-close" onclick="closePositionModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">직급명</label>
                <input type="text" class="form-input" id="position-input" placeholder="예: 사원">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closePositionModal()">취소</button>
            <button class="btn btn-primary" onclick="savePosition()">저장</button>
        </div>
    </div>
</div>

<!-- 모달 (상태 추가/수정) -->
<div class="modal hidden" id="status-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="status-modal-title">상태 추가</h3>
            <button class="modal-close" onclick="closeStatusModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">상태 값 (영문)</label>
                <input type="text" class="form-input" id="status-value-input" placeholder="예: active">
            </div>
            <div class="form-group">
                <label class="form-label">상태 라벨 (한글)</label>
                <input type="text" class="form-input" id="status-label-input" placeholder="예: 정상">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeStatusModal()">취소</button>
            <button class="btn btn-primary" onclick="saveStatus()">저장</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{{ url_for('static', filename='js/pages/classification-options.js') }}"></script>
{% endblock %}

