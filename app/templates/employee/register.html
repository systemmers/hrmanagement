{% extends "base.html" %}
{% from "components/page_header.html" import render as page_header %}
{% from "components/photo_upload.html" import render as photo_upload %}

{% block title %}직원 등록 - 인사카드 관리 시스템{% endblock %}

{% block content %}
{{ page_header(
    title='직원 등록',
    description='새로운 직원 정보를 등록합니다',
    actions=[
        {'url': url_for('employee.index'), 'icon': 'fa-times', 'text': '취소', 'class': 'btn-secondary'}
    ]
) }}

<div class="form-container">
    <form method="POST" action="{{ url_for('employee.new') }}" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <!-- 기본 정보 -->
        <div class="form-section">
            <h2 class="form-section-title">기본 정보</h2>

            {{ photo_upload(form.photo, preview_url='https://i.pravatar.cc/150') }}

            <div class="form-row">
                <div class="form-group">
                    <label for="name" class="form-label required">성명</label>
                    {{ form.name(class="form-input", id="name", **{'aria-required': 'true', 'aria-describedby': 'name-error'}) }}
                    <span id="name-error" class="error-message" role="alert">
                    {% if form.name.errors %}
                        {% for error in form.name.errors %}
                            {{ error }}
                        {% endfor %}
                    {% endif %}
                    </span>
                </div>

                <div class="form-group">
                    <label for="phone" class="form-label">전화번호</label>
                    {{ form.phone(class="form-input", id="phone", type="tel") }}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group full-width">
                    <label for="email" class="form-label">이메일</label>
                    {{ form.email(class="form-input", id="email") }}
                </div>
            </div>

            <div class="form-group">
                <label for="address" class="form-label">주소</label>
                {{ form.address(class="form-textarea", id="address") }}
            </div>
        </div>

        <!-- 소속 정보 -->
        <div class="form-section">
            <h2 class="form-section-title">소속 정보</h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="department_id" class="form-label">부서</label>
                    {{ form.department_id(class="form-select", id="department_id") }}
                </div>

                <div class="form-group">
                    <label for="position_id" class="form-label">직급</label>
                    {{ form.position_id(class="form-select", id="position_id") }}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="hire_date" class="form-label">입사일</label>
                    {{ form.hire_date(class="form-input", id="hire_date") }}
                </div>

                <div class="form-group">
                    <label for="employment_type" class="form-label">고용형태</label>
                    {{ form.employment_type(class="form-select", id="employment_type") }}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="workplace" class="form-label">근무지</label>
                    {{ form.workplace(class="form-input", id="workplace") }}
                </div>

                <div class="form-group">
                    <label for="status" class="form-label">상태</label>
                    {{ form.status(class="form-select", id="status") }}
                </div>
            </div>
        </div>

        <!-- 액션 버튼 -->
        <div class="form-actions">
            <a href="{{ url_for('employee.index') }}" class="btn btn-secondary">
                <i class="fas fa-times"></i>
                <span>취소</span>
            </a>
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>
{% endblock %}
