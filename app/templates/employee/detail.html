{% extends "base.html" %}
{% from "components/page_header.html" import render as page_header %}
{% from "components/status_badge.html" import render as status_badge %}

{% block title %}{{ employee.name }} - 인사카드 관리 시스템{% endblock %}

{% block content %}
{{ page_header(
    title=employee.name,
    description='직원 상세 정보',
    actions=[
        {'url': url_for('employee.index'), 'icon': 'fa-arrow-left', 'text': '목록', 'class': 'btn-secondary'},
        {'url': url_for('employee.edit', id=employee.id), 'icon': 'fa-edit', 'text': '수정', 'class': 'btn-primary'}
    ]
) }}

<div class="detail-container">
    <div class="detail-header">
        {% if employee.photo %}
        <img src="{{ url_for('static', filename='uploads/' + employee.photo) }}"
             alt="{{ employee.name }}"
             class="detail-photo"
             loading="lazy"
             onerror="this.src='https://i.pravatar.cc/150?img={{ employee.id % 70 }}'">
        {% else %}
        <img src="https://i.pravatar.cc/150?img={{ employee.id % 70 }}"
             alt="{{ employee.name }}"
             class="detail-photo"
             loading="lazy">
        {% endif %}

        <div class="detail-basic">
            <h2 class="detail-name">{{ employee.name }}</h2>
            <p class="detail-position">
                {{ employee.department.name if employee.department else '미배정' }} · {{ employee.position.name if employee.position else '미정' }}
            </p>
            {{ status_badge(employee.status) }}
        </div>
    </div>

    <div class="detail-section">
        <h3 class="detail-section-title">기본 정보</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <div class="detail-label">전화번호</div>
                <div class="detail-value">{{ employee.phone if employee.phone else '-' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">이메일</div>
                <div class="detail-value">{{ employee.email if employee.email else '-' }}</div>
            </div>
            <div class="detail-item" style="grid-column: 1 / -1;">
                <div class="detail-label">주소</div>
                <div class="detail-value">{{ employee.address if employee.address else '-' }}</div>
            </div>
        </div>
    </div>

    <div class="detail-section">
        <h3 class="detail-section-title">소속 정보</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <div class="detail-label">입사일</div>
                <div class="detail-value">{{ employee.hire_date.strftime('%Y년 %m월 %d일') if employee.hire_date else '-' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">고용형태</div>
                <div class="detail-value">{{ employee.employment_type if employee.employment_type else '-' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">근무지</div>
                <div class="detail-value">{{ employee.workplace if employee.workplace else '-' }}</div>
            </div>
            <div class="detail-item">
                <div class="detail-label">등록일</div>
                <div class="detail-value">{{ employee.created_at.strftime('%Y년 %m월 %d일') }}</div>
            </div>
        </div>
    </div>

    <div class="detail-actions">
        <a href="{{ url_for('employee.index') }}" class="btn btn-secondary">
            <i class="fas fa-list"></i>
            <span>목록으로</span>
        </a>
        <a href="{{ url_for('employee.edit', id=employee.id) }}" class="btn btn-primary">
            <i class="fas fa-edit"></i>
            <span>수정하기</span>
        </a>
        <button class="btn btn-secondary btn-delete"
                data-employee-id="{{ employee.id }}"
                data-employee-name="{{ employee.name }}"
                style="margin-left: auto; border-color: #ef4444; color: #ef4444;">
            <i class="fas fa-trash"></i>
            <span>삭제</span>
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/employee.js') }}"></script>
{% endblock %}
