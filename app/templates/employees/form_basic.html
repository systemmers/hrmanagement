{% extends "base.html" %}

{% block title %}기본정보 수정 - {{ employee.name }} - 인사카드 관리 시스템{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/section-nav.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/cards.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/employee-form.css') }}">
{% endblock %}

{% block content %}
<div class="form-page-layout">
    {# 좌측: 섹션 네비게이션 #}
    <aside class="section-nav" id="sectionNav">
        <div class="section-nav-header">
            <div class="section-nav-title">기본정보 수정</div>
            <div class="section-nav-subtitle">{{ employee.name }}</div>
        </div>
        <nav class="section-nav-menu">
            <div class="section-nav-group">
                <div class="section-nav-group-title">개인정보</div>
                <a href="#personal-info" class="section-nav-item active">
                    <i class="fas fa-user"></i>
                    <span>개인 기본정보</span>
                </a>
                <a href="#family-info" class="section-nav-item">
                    <i class="fas fa-users"></i>
                    <span>가족정보</span>
                </a>
            </div>
        </nav>
    </aside>

    {# 메인 콘텐츠: 폼 #}
    <main class="form-main-content">
        {# 페이지 헤더 #}
        <div class="form-page-header">
            <h1 class="form-page-title">기본정보 수정</h1>
            <div class="form-page-actions">
                <a href="{{ url_for('employees.employee_detail', employee_id=employee.id, view='basic') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    <span>취소</span>
                </a>
            </div>
        </div>

        <div class="alert alert-info alert-info-box">
            <i class="fas fa-info-circle"></i>
            <span>개인 기본정보와 가족정보를 수정할 수 있습니다. 소속정보, 급여 등은 인사담당자에게 문의하세요.</span>
        </div>

        <form method="POST" action="{{ url_for('employees.employee_update_basic', employee_id=employee.id) }}" class="employee-form" id="employeeForm">

            {# 섹션 1: 개인 기본정보 #}
            {% include 'partials/employee_form/_personal_info.html' %}

            {# 섹션 2: 가족정보 #}
            {% include 'partials/employee_form/_family_info.html' %}

            {# 폼 제출 버튼 #}
            <div class="form-submit-section">
                <div class="form-submit-info">
                    <span class="required">*</span> 표시는 필수 입력 항목입니다.
                </div>
                <div class="form-submit-actions">
                    <a href="{{ url_for('employees.employee_detail', employee_id=employee.id, view='basic') }}" class="btn btn-secondary btn-lg">
                        <i class="fas fa-times"></i>
                        <span>취소</span>
                    </a>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-save"></i>
                        <span>수정 완료</span>
                    </button>
                </div>
            </div>

        </form>
    </main>
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{{ url_for('static', filename='js/pages/employee-form.js') }}"></script>
{% endblock %}
