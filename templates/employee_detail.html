{% extends "base.html" %}

{% block title %}{{ employee.name }} - 인사카드{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/section-nav.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/layouts/right-sidebar.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/employee-header.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/cards.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/tables.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/employee-detail.css') }}">
{% endblock %}

{% block content %}
<div class="detail-page-layout">
    <!-- 좌측 섹션 네비게이션 -->
    <aside class="section-nav" id="sectionNav">
        <div class="section-nav-header">
            <div class="section-nav-title">인사카드</div>
            <div class="section-nav-subtitle">{{ employee.name }} {{ employee.position }}</div>
        </div>
        <nav class="section-nav-menu">
            <!-- 기본정보 그룹 -->
            <div class="section-nav-group">
                <div class="section-nav-group-title">기본정보</div>
                <a href="#personal-info" class="section-nav-item active">
                    <i class="fas fa-user"></i>
                    <span>개인 기본정보</span>
                </a>
                <a href="#organization-info" class="section-nav-item">
                    <i class="fas fa-building"></i>
                    <span>소속정보</span>
                </a>
                <a href="#contract-info" class="section-nav-item">
                    <i class="fas fa-file-contract"></i>
                    <span>계약정보</span>
                </a>
                <a href="#salary-info" class="section-nav-item">
                    <i class="fas fa-won-sign"></i>
                    <span>급여정보</span>
                </a>
                <a href="#benefit-info" class="section-nav-item">
                    <i class="fas fa-umbrella-beach"></i>
                    <span>연차 및 복리후생</span>
                </a>
                <a href="#insurance-info" class="section-nav-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>4대보험</span>
                </a>
            </div>

            <!-- 이력 및 경력 그룹 -->
            <div class="section-nav-group">
                <div class="section-nav-group-title">이력 및 경력</div>
                <a href="#education-info" class="section-nav-item">
                    <i class="fas fa-graduation-cap"></i>
                    <span>학력정보</span>
                </a>
                <a href="#career-info" class="section-nav-item">
                    <i class="fas fa-briefcase"></i>
                    <span>경력정보</span>
                </a>
                <a href="#certificate-info" class="section-nav-item">
                    <i class="fas fa-certificate"></i>
                    <span>자격증 및 면허</span>
                </a>
                <a href="#language-info" class="section-nav-item">
                    <i class="fas fa-language"></i>
                    <span>언어능력</span>
                </a>
                <a href="#military-info" class="section-nav-item">
                    <i class="fas fa-medal"></i>
                    <span>병역/프로젝트/수상</span>
                </a>
            </div>

            <!-- 인사기록 그룹 -->
            <div class="section-nav-group">
                <div class="section-nav-group-title">인사기록</div>
                <a href="#employment-contract" class="section-nav-item">
                    <i class="fas fa-file-signature"></i>
                    <span>근로계약 및 연봉</span>
                </a>
                <a href="#personnel-movement" class="section-nav-item">
                    <i class="fas fa-arrow-up"></i>
                    <span>인사이동 및 고과</span>
                </a>
                <a href="#attendance-assets" class="section-nav-item">
                    <i class="fas fa-calendar-check"></i>
                    <span>근태 및 비품</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- 메인 콘텐츠 -->
    <div class="detail-main-content">
        <!-- 페이지 헤더 -->
        <div class="detail-page-header">
            <h1 class="detail-page-title">직원 상세 정보</h1>
            <div class="detail-page-actions">
                <a href="{{ url_for('employee_list') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    <span>목록으로</span>
                </a>
                <a href="{{ url_for('employee_edit', employee_id=employee.id) }}" class="btn btn-primary">
                    <i class="fas fa-edit"></i>
                    <span>수정</span>
                </a>
                <button class="btn btn-danger" onclick="deleteEmployee({{ employee.id }}, '{{ employee.name }}')">
                    <i class="fas fa-trash"></i>
                    <span>삭제</span>
                </button>
            </div>
        </div>

        <!-- 직원 헤더 -->
        <div class="employee-header">
            <div class="employee-header-content">
                <div class="employee-photo">
                    <img src="{{ employee.photo }}" alt="{{ employee.name }}" onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\'fas fa-user\'></i>';">
                </div>
                <div class="employee-info">
                    <div class="employee-name">{{ employee.name }}</div>
                    <div class="employee-name-en">{{ employee.name|upper }}</div>
                    <div class="employee-meta">
                        <div class="meta-item">
                            <i class="fas fa-building"></i>
                            <span>{{ employee.department }}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-id-badge"></i>
                            <span>{{ employee.position }}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar-check"></i>
                            <span>{{ get_status_text(employee.status) }}</span>
                        </div>
                    </div>
                    <div class="employee-stats">
                        <div class="stat-item">
                            <div class="stat-label">입사일</div>
                            <div class="stat-value">{{ employee.hireDate }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">재직기간</div>
                            <div class="stat-value">{{ calculate_tenure(employee.hireDate) }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">연차 잔여</div>
                            <div class="stat-value">15일</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">사번</div>
                            <div class="stat-value">EMP-{{ '%03d'|format(employee.id) }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             섹션 1: 개인 기본정보
             ======================================== -->
        <section id="personal-info" class="content-section">
            <h2 class="section-title">개인 기본정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-user"></i>
                        개인 기본정보
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">성명 (한글)</div>
                            <div class="info-value">{{ employee.name }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">여권명 (영문)</div>
                            <div class="info-value{% if not employee.name_en %} empty{% endif %}">{{ employee.name_en or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">주민등록번호</div>
                            <div class="info-value empty">***-*******</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">생년월일</div>
                            <div class="info-value{% if not employee.birth_date %} empty{% endif %}">{{ employee.birth_date or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">성별</div>
                            <div class="info-value{% if not employee.gender %} empty{% endif %}">{{ get_gender_label(employee.gender) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">결혼여부</div>
                            <div class="info-value{% if not family_list %} empty{% endif %}">{% if family_list|selectattr('relation', 'equalto', 'spouse')|list %}기혼{% else %}미혼{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">휴대전화</div>
                            <div class="info-value">{{ format_phone(employee.phone) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">내선번호</div>
                            <div class="info-value{% if not employee.internal_phone %} empty{% endif %}">{{ employee.internal_phone or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">개인 이메일</div>
                            <div class="info-value highlight">{{ employee.email }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">회사 이메일</div>
                            <div class="info-value{% if not employee.company_email %} empty{% endif %}">{{ employee.company_email or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">비상연락처</div>
                            <div class="info-value{% if not employee.emergency_contact %} empty{% endif %}">{{ employee.emergency_contact or '정보 없음' }}{% if employee.emergency_relation %} ({{ employee.emergency_relation }}){% endif %}</div>
                        </div>
                    </div>
                    <div style="margin-top: var(--space-5);">
                        <div class="info-item">
                            <div class="info-label">주민등록상 주소</div>
                            <div class="info-value{% if not employee.address %} empty{% endif %}">{{ employee.address or '정보 없음' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 2: 소속정보
             ======================================== -->
        <section id="organization-info" class="content-section">
            <h2 class="section-title">소속정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-building"></i>
                        소속정보
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">소속</div>
                            <div class="info-value highlight">{{ employee.department }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">부서</div>
                            <div class="info-value highlight">{{ employee.team or employee.department }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">직급</div>
                            <div class="info-value">{{ employee.position }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">직책</div>
                            <div class="info-value{% if not employee.job_title %} empty{% endif %}">{{ employee.job_title or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">사원번호</div>
                            <div class="info-value{% if not employee.employee_number %} empty{% endif %}">{{ employee.employee_number or 'EMP-%03d'|format(employee.id) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">근무형태</div>
                            <div class="info-value">{{ get_employment_type_label(employee.employment_type) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">근무지</div>
                            <div class="info-value{% if not employee.work_location %} empty{% endif %}">{{ employee.work_location or '본사' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">재직상태</div>
                            <div class="info-value">
                                <span class="badge {{ get_status_badge_class(employee.status) }}">
                                    {{ get_status_text(employee.status) }}
                                </span>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">입사일</div>
                            <div class="info-value">{{ employee.hireDate }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">재직기간</div>
                            <div class="info-value highlight">{{ calculate_tenure(employee.hireDate) }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 3: 계약정보
             ======================================== -->
        <section id="contract-info" class="content-section">
            <h2 class="section-title">계약정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-file-contract"></i>
                        계약정보
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">계약형태</div>
                            <div class="info-value{% if not contract %} empty{% endif %}">{{ contract.contract_type if contract else (get_employment_type_label(employee.employment_type) if employee.employment_type else '정보 없음') }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">계약기간</div>
                            <div class="info-value{% if not contract and not employee.contract_period %} empty{% endif %}">{{ contract.contract_period if contract else (employee.contract_period or '무기한') }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">계약시작일</div>
                            <div class="info-value">{{ contract.contract_date if contract else employee.hireDate }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">직원유형</div>
                            <div class="info-value{% if not contract %} empty{% endif %}">{{ contract.employee_type if contract else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">근무형태</div>
                            <div class="info-value{% if not contract %} empty{% endif %}">{{ contract.work_type if contract else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">시용기간 종료</div>
                            <div class="info-value{% if not employee.probation_end %} empty{% endif %}">{{ employee.probation_end or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">근무시간</div>
                            <div class="info-value">09:00 ~ 18:00</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">휴게시간</div>
                            <div class="info-value">12:00 ~ 13:00</div>
                        </div>
                        {% if employee.resignation_date %}
                        <div class="info-item">
                            <div class="info-label">퇴사일</div>
                            <div class="info-value">{{ employee.resignation_date }}</div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 4: 급여정보
             ======================================== -->
        <section id="salary-info" class="content-section">
            <h2 class="section-title">급여정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-won-sign"></i>
                        급여정보
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">급여형태</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ salary.salary_type if salary else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">기본급</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '{:,}'.format(salary.base_salary) if salary else '정보 없음' }}{% if salary %}원{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">직책수당</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '{:,}'.format(salary.position_allowance) if salary else '정보 없음' }}{% if salary %}원{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">식대</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '{:,}'.format(salary.meal_allowance) if salary else '정보 없음' }}{% if salary %}원{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">교통비</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '{:,}'.format(salary.transportation_allowance) if salary else '정보 없음' }}{% if salary %}원{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">총 급여</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '{:,}'.format(salary.total_salary) if salary else '정보 없음' }}{% if salary %}원{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">급여지급일</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ '매월 ' ~ salary.payment_day ~ '일' if salary else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">급여지급방법</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ salary.payment_method if salary else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">급여계좌</div>
                            <div class="info-value{% if not salary %} empty{% endif %}">{{ salary.bank_account if salary else '정보 없음' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 5: 연차 및 복리후생
             ======================================== -->
        <section id="benefit-info" class="content-section">
            <h2 class="section-title">연차 및 복리후생</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-umbrella-beach"></i>
                        연차 및 복리후생 {% if benefit %}({{ benefit.year }}년){% endif %}
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">연차 발생일수</div>
                            <div class="info-value{% if not benefit %} empty{% endif %}">{{ (benefit.annual_leave_granted|string ~ '일') if benefit else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">연차 사용일수</div>
                            <div class="info-value{% if not benefit %} empty{% endif %}">{{ (benefit.annual_leave_used|string ~ '일') if benefit else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">연차 잔여일수</div>
                            <div class="info-value{% if not benefit %} empty{% else %} highlight{% endif %}">{{ (benefit.annual_leave_remaining|string ~ '일') if benefit else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">퇴직금 유형</div>
                            <div class="info-value{% if not benefit %} empty{% endif %}">{{ benefit.severance_type if benefit else '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">퇴직금 적립방법</div>
                            <div class="info-value{% if not benefit %} empty{% endif %}">{{ benefit.severance_method if benefit else '정보 없음' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 6: 4대보험
             ======================================== -->
        <section id="insurance-info" class="content-section">
            <h2 class="section-title">4대보험</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-shield-alt"></i>
                        4대보험
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">4대보험</div>
                            <div class="info-value"><span class="badge badge-success">가입</span></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">건강보험</div>
                            <div class="info-value"><span class="badge badge-success">가입</span></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">국민연금</div>
                            <div class="info-value"><span class="badge badge-success">가입</span></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">고용보험</div>
                            <div class="info-value"><span class="badge badge-success">가입</span></div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">산재보험</div>
                            <div class="info-value"><span class="badge badge-success">가입</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 7: 학력정보
             ======================================== -->
        <section id="education-info" class="content-section">
            <h2 class="section-title">학력정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-graduation-cap"></i>
                        학력정보
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>학력구분</th>
                                    <th>학교명</th>
                                    <th>졸업년월</th>
                                    <th>학부/학과</th>
                                    <th>전공</th>
                                    <th>학점</th>
                                    <th>졸업유무</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if education_list %}
                                {% for edu in education_list %}
                                <tr>
                                    <td>{{ get_degree_label(edu.degree) }}</td>
                                    <td>{{ edu.school }}</td>
                                    <td>{{ edu.graduation_year }}</td>
                                    <td>{{ edu.major }}</td>
                                    <td>{{ edu.major }}</td>
                                    <td class="empty">-</td>
                                    <td><span class="badge badge-success">졸업</span></td>
                                    <td>-</td>
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="8" class="table-empty">
                                        <i class="fas fa-graduation-cap"></i>
                                        <p>등록된 학력정보가 없습니다</p>
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 8: 경력정보
             ======================================== -->
        <section id="career-info" class="content-section">
            <h2 class="section-title">경력정보</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-briefcase"></i>
                        경력정보 (입사 전)
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>직장명</th>
                                    <th>입사일</th>
                                    <th>퇴사일</th>
                                    <th>경력</th>
                                    <th>부서</th>
                                    <th>직급</th>
                                    <th>담당업무</th>
                                    <th>연봉</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if career_list %}
                                {% for career in career_list %}
                                <tr>
                                    <td>{{ career.company }}</td>
                                    <td>{{ career.start_date }}</td>
                                    <td>{{ career.end_date or '재직중' }}</td>
                                    <td>-</td>
                                    <td>-</td>
                                    <td>{{ career.position or '-' }}</td>
                                    <td>{{ career.duty or '-' }}</td>
                                    <td class="empty">-</td>
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="8" class="table-empty">
                                        <i class="fas fa-briefcase"></i>
                                        <p>등록된 경력정보가 없습니다</p>
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                    <div class="table-summary">
                        <strong>총 경력:</strong> {% if career_list %}{{ career_list|length }}개사{% else %}정보 없음{% endif %}
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 9: 자격증 및 면허
             ======================================== -->
        <section id="certificate-info" class="content-section">
            <h2 class="section-title">자격증 및 면허</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-certificate"></i>
                        자격증 및 면허
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>구분</th>
                                    <th>종류</th>
                                    <th>등급/점수</th>
                                    <th>발행처</th>
                                    <th>취득일</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if certificate_list %}
                                {% for cert in certificate_list %}
                                <tr>
                                    <td>자격증</td>
                                    <td>{{ cert.name }}</td>
                                    <td>{{ cert.certificate_number or '-' }}</td>
                                    <td>{{ cert.issuer }}</td>
                                    <td>{{ cert.acquired_date }}</td>
                                    <td>{% if cert.expiry_date %}만료: {{ cert.expiry_date }}{% else %}-{% endif %}</td>
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="6" class="table-empty">
                                        <i class="fas fa-certificate"></i>
                                        <p>등록된 자격증 정보가 없습니다</p>
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 10: 언어능력
             ======================================== -->
        <section id="language-info" class="content-section">
            <h2 class="section-title">언어능력</h2>
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-language"></i>
                        언어능력
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>언어</th>
                                    <th>수준</th>
                                    <th>시험명</th>
                                    <th>점수</th>
                                    <th>취득일</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if language_list %}
                                {% for lang in language_list %}
                                <tr>
                                    <td>{{ lang.language }}</td>
                                    <td>{{ get_level_label(lang.level) }}</td>
                                    <td>{{ lang.test_name or '-' }}</td>
                                    <td>{{ lang.score or '-' }}</td>
                                    <td>{{ lang.acquired_date or '-' }}</td>
                                </tr>
                                {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="5" class="table-empty">
                                        <i class="fas fa-language"></i>
                                        <p>등록된 언어능력 정보가 없습니다</p>
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 11: 병역/프로젝트/수상
             ======================================== -->
        <section id="military-info" class="content-section">
            <h2 class="section-title">병역 / 프로젝트 / 수상</h2>

            <!-- 병역정보 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-medal"></i>
                        병역정보
                    </h3>
                </div>
                <div class="card-body">
                    {% if military %}
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">병역구분</div>
                            <div class="info-value">{{ get_military_status_label(military.status) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">군별</div>
                            <div class="info-value{% if not military.branch %} empty{% endif %}">{{ get_branch_label(military.branch) }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">복무기간</div>
                            <div class="info-value{% if not military.start_date %} empty{% endif %}">{% if military.start_date %}{{ military.start_date }} ~ {{ military.end_date or '복무중' }}{% else %}정보 없음{% endif %}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">계급</div>
                            <div class="info-value{% if not military.rank %} empty{% endif %}">{{ military.rank or '정보 없음' }}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">보직</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        {% if military.exemption_reason %}
                        <div class="info-item">
                            <div class="info-label">면제사유</div>
                            <div class="info-value">{{ military.exemption_reason }}</div>
                        </div>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">병역구분</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">군별</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">복무기간</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">계급</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">보직</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">병과</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- 유사사업 참여경력 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-project-diagram"></i>
                        유사사업 참여경력
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>사업명</th>
                                    <th>참여기간</th>
                                    <th>기간</th>
                                    <th>담당업무</th>
                                    <th>역할/직책</th>
                                    <th>발주처</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="table-empty">
                                        <i class="fas fa-project-diagram"></i>
                                        <p>등록된 프로젝트 정보가 없습니다</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 수상내역 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-trophy"></i>
                        수상내역
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>수상일</th>
                                    <th>수상명</th>
                                    <th>수여기관</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" class="table-empty">
                                        <i class="fas fa-trophy"></i>
                                        <p>등록된 수상내역이 없습니다</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 12: 근로계약 및 연봉
             ======================================== -->
        <section id="employment-contract" class="content-section">
            <h2 class="section-title">근로계약 및 연봉</h2>

            <!-- 근로계약 이력 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-file-signature"></i>
                        근로계약 이력
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>계약일</th>
                                    <th>계약구분</th>
                                    <th>계약기간 시작</th>
                                    <th>계약기간 종료</th>
                                    <th>계약기간</th>
                                    <th>직원구분</th>
                                    <th>근무형태</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ employee.hireDate }}</td>
                                    <td><span class="badge badge-success">정규직</span></td>
                                    <td>{{ employee.hireDate }}</td>
                                    <td>-</td>
                                    <td>{{ calculate_tenure(employee.hireDate) }}</td>
                                    <td>정규직</td>
                                    <td>전일제</td>
                                    <td>신규입사</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 연봉계약 이력 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-coins"></i>
                        연봉계약 이력
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>계약연도</th>
                                    <th>연봉</th>
                                    <th>상여금</th>
                                    <th>총액</th>
                                    <th>계약기간</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if salary_history_list %}
                                    {% for history in salary_history_list|sort(attribute='contract_year', reverse=True) %}
                                    <tr>
                                        <td>{{ history.contract_year }}년</td>
                                        <td>{{ '{:,}'.format(history.annual_salary) }}원</td>
                                        <td>{{ '{:,}'.format(history.bonus) }}원</td>
                                        <td><strong>{{ '{:,}'.format(history.total_amount) }}원</strong></td>
                                        <td>{{ history.contract_period }}</td>
                                    </tr>
                                    {% endfor %}
                                {% else %}
                                <tr>
                                    <td colspan="5" class="table-empty">
                                        <i class="fas fa-coins"></i>
                                        <p>등록된 연봉계약 정보가 없습니다</p>
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 13: 인사이동 및 고과
             ======================================== -->
        <section id="personnel-movement" class="content-section">
            <h2 class="section-title">인사이동 및 고과</h2>

            <!-- 인사이동 및 승진 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-arrow-up"></i>
                        인사이동 및 승진
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>발령일</th>
                                    <th>발령구분</th>
                                    <th>발령전</th>
                                    <th>발령후</th>
                                    <th>발령전 직급</th>
                                    <th>발령후 직급</th>
                                    <th>직무</th>
                                    <th>발령사유</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ employee.hireDate }}</td>
                                    <td><span class="badge badge-info">신규채용</span></td>
                                    <td>-</td>
                                    <td>{{ employee.department }}</td>
                                    <td>-</td>
                                    <td>{{ employee.position }}</td>
                                    <td>-</td>
                                    <td>신입사원</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 인사고과 - 정기평가 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-chart-line"></i>
                        인사고과 - 정기평가
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>연차</th>
                                    <th>1분기</th>
                                    <th>2분기</th>
                                    <th>3분기</th>
                                    <th>4분기</th>
                                    <th>종합평가</th>
                                    <th>연봉협상</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="8" class="table-empty">
                                        <i class="fas fa-chart-line"></i>
                                        <p>등록된 인사고과 정보가 없습니다</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 교육훈련 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-book"></i>
                        교육훈련
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>교육일</th>
                                    <th>교육명</th>
                                    <th>교육기관</th>
                                    <th>교육시간</th>
                                    <th>이수여부</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="table-empty">
                                        <i class="fas fa-book"></i>
                                        <p>등록된 교육훈련 정보가 없습니다</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             섹션 14: 근태 및 비품
             ======================================== -->
        <section id="attendance-assets" class="content-section">
            <h2 class="section-title">근태 및 비품</h2>

            <!-- 근태현황 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-calendar-check"></i>
                        근태현황
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">출근일수</div>
                            <div class="info-value empty">정보 없음</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">결근일수</div>
                            <div class="info-value">0일</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">지각횟수</div>
                            <div class="info-value">0회</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">조퇴횟수</div>
                            <div class="info-value">0회</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">연차사용</div>
                            <div class="info-value">0일</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">연차잔여</div>
                            <div class="info-value highlight">15일</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 비품지급 -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-laptop"></i>
                        비품지급
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>지급일</th>
                                    <th>품목</th>
                                    <th>모델/사양</th>
                                    <th>시리얼번호</th>
                                    <th>상태</th>
                                    <th>비고</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="table-empty">
                                        <i class="fas fa-laptop"></i>
                                        <p>등록된 비품지급 정보가 없습니다</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>

<!-- 모바일 섹션 네비게이션 토글 버튼 -->
<button class="mobile-section-nav-toggle" id="mobileNavToggle">
    <i class="fas fa-bars"></i>
</button>

<!-- 모바일 오버레이 -->
<div class="section-nav-overlay" id="sectionNavOverlay"></div>
{% endblock %}

{% block sidebar_right %}
<!-- 우측 파일 사이드바 -->
<aside class="right-sidebar">
    <div class="right-sidebar-header">
        <h2 class="right-sidebar-title">개인 첨부서류</h2>
    </div>
    <div class="right-sidebar-content">
        <div class="file-upload-area" id="fileUploadArea">
            <div class="file-upload-icon">
                <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <div class="file-upload-text">파일을 드래그하거나 클릭하여 업로드</div>
            <div class="file-upload-hint">PDF, DOC, XLS, JPG (최대 10MB)</div>
        </div>

        <div id="fileList">
            <!-- 샘플 파일 카드들 -->
            <div class="empty-state-small">
                <i class="fas fa-folder-open"></i>
                <p>등록된 첨부파일이 없습니다</p>
            </div>
        </div>
    </div>
</aside>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/pages/employee-detail.js') }}"></script>
<script>
function deleteEmployee(id, name) {
    if (confirm(`"${name}" 직원을 삭제하시겠습니까?\n이 작업은 되돌릴 수 없습니다.`)) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/employees/${id}/delete`;
        document.body.appendChild(form);
        form.submit();
    }
}
</script>
{% endblock %}
